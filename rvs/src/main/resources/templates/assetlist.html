<!DOCTYPE html>

<html
  xmlns:th="http://www.thymeleaf.org" 
  lang="en"
  class="light-style layout-navbar-fixed layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  th:data-assets-path="@{/assets/}"
  data-template="vertical-menu-template"
  
>
  <head>
	<meta name="_csrf" th:content="${_csrf.token}" />
	<!-- default header name is X-CSRF-TOKEN -->
	<meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Asset List</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/assets/img/favicon/favicon.ico}" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet" type="text/css"
    />

    <!-- Icons -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/boxicons.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/fontawesome.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/flag-icons.css}" />

    <!-- Core CSS -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/css/rtl/core.css}" class="template-customizer-core-css" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/css/rtl/theme-default.css}" class="template-customizer-theme-css" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/css/demo.css}" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-select-bs5/select.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-fixedcolumns-bs5/fixedcolumns.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-fixedheader-bs5/fixedheader.bootstrap5.css}">
	
	 <link rel="stylesheet" th:href="@{/assets/vendor/libs/flatpickr/flatpickr.css}">
    <!-- Page CSS -->

    <!-- Helpers -->
    <script th:src="@{/assets/vendor/js/helpers.js}"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script th:src="@{/assets/vendor/js/template-customizer.js}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script th:src="@{/assets/js/config.js}"></script>
    <style>
    
    .bx-shopping-bag {
    font-size: 54px;
    position: absolute;
    right: 110px;
    top: 15px;
    z-index: 0;
    cursor: pointer;
}

#cartcount {
    text-align: center;
    position: absolute;
    right: 102px;
    padding: 15px;  
    width: 70px;
    z-index: 10;
    cursor: pointer;
}


    </style>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->
		<div th:insert="menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

       <div th:insert="header"></div>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->
				 <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="py-3 breadcrumb-wrapper mb-4"><span class="text-muted fw-light">Administration/Asset/ </span>Asset List</h4>

 
 <div class="card">
 
 	
 
 
 <div class="card-header">
 <a href="assetnew" class="addnewVendor" style="vertical-align: middle"><button type="button" class="btn btn-warning mr-1 mb-1">
										<i class="bx bx-plus-circle "></i> New
									</button></a>
									
 <span data-bs-toggle="modal" data-bs-target="#exampleModalScrollable"> <i class="bx bx-shopping-bag mr-1 mb-1"></i> <span id="cartcount">0</span>
								</span>
								
 </div>
                <div class="card-datatable table-responsive pt-0">
                  <table class="datatables-basic table table-bordered">
                    <thead>
                      <tr>
                       
                    <th>#</th>
					<th>Asset Type</th>
					<th>Asset Name</th>
					<th>Branch</th>
					<th>Status</th>
					<th>Custodian</th>
					<th>Last Update</th>
                        
                      </tr>
                    </thead>
                  </table>
                </div>
              </div>
              
              

             
             <!--scrolling content Modal -->
								<div class="modal fade" id="exampleModalScrollable"
									tabindex="-1" role="dialog"
									aria-labelledby="exampleModalScrollableTitle"
									aria-hidden="true">
									<div class="modal-dialog modal-dialog-scrollable modal-xl"
										role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalScrollableTitle">Selected
													Items</h5>
												
												
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body">
												<table class="table table-hover" id="cart">
													<thead>
														<tr>
															<th>#</th>
															<th>Asset Type</th>
															<th>Asset Name</th>
															<th>Branch</th>
															<th>Status</th>
															<th>Custodian</th>
															<th>Last Update</th>
														</tr>
													</thead>
													<tbody>

													</tbody>
												</table>
											</div>

											<div class="modal-footer">
												<div style="float: left;">
													<button type="button" class="btn btn-primary mr-1 mb-1"
														id="checkout">
														<i class="bx bx-upload  isize"></i> Check Out
													</button>
													<button type="button" class="btn btn-warning mr-1 mb-1"
														id="checkin">
														<i class="bx bx-download isize"></i> Check In
													</button>
													<button type="button" class="btn btn-success  mr-1 mb-1"
														id="assettransfer">
														<i class="bx bx-transfer isize"></i> Asset Transfer
													</button>
												</div>


												<span class="carttotallabelcount"><b>Total Item
														Count - <span id="totalcartval"> Nos 
												</b></span> </span>

											
												 



											</div>
										</div>
									</div>
								</div>
							 

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  Â©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with â¤ï¸ by
                  <a href="https://pixinvent.com" target="_blank" class="footer-link fw-semibold">PIXINVENT</a>
                </div>
                <div>
                  <a href="https://themeforest.net/licenses/standard" class="footer-link me-4" target="_blank"
                    >License</a
                  >
                  <a href="https://1.envato.market/pixinvent_portfolio" target="_blank" class="footer-link me-4"
                    >More Themes</a
                  >

                  <a
                    href="https://pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/documentation-bs5/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a href="https://pixinvent.ticksy.com/" target="_blank" class="footer-link d-none d-sm-inline-block"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
  <!-- build:js assets/vendor/js/core.js -->
  <script th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
  <script th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
  <script th:src="@{/assets/vendor/js/bootstrap.js}"></script>
  <script th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>
  
  <script th:src="@{/assets/vendor/libs/hammer/hammer.js}"></script>
  

  <script th:src="@{/assets/vendor/libs/i18n/i18n.js}"></script>
  <script th:src="@{/assets/vendor/libs/typeahead-js/typeahead.js}"></script>
  
  <script th:src="@{/assets/vendor/js/menu.js}"></script>
  <!-- endbuild -->
<script th:src="@{/assets/vendor/libs/flatpickr/flatpickr.js}"></script>

<script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
  <!-- Vendors JS -->
  <script th:src="@{/assets/vendor/libs/datatables/jquery.dataTables.js}"></script>
  <script th:src="@{/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js}"></script>
  <script th:src="@{/assets/vendor/libs/datatables-fixedcolumns/datatables.fixedcolumns.js}"></script>

  <!-- Main JS -->
  <script th:src="@{/assets/js/main.js}"></script>
  
  <!-- Page JS-->
 
 

  
    
    <script>
    var token = $("meta[name='_csrf']").attr("content");
	var header = $("meta[name='_csrf_header']").attr("content");
	$(document).ajaxSend(function(e, xhr, options) {
		xhr.setRequestHeader(header, token);
	});
	
	
	cart_count();
	
	  var dt_basic_table = $('.datatables-basic');
	  
		
	    var dt_basic = dt_basic_table.DataTable({
	    	 ajax: {
	             "url": "assetlistjson",
	             "type": "GET",
	             "dataSrc": "",
	         },
	         
	         columns: [
			        { data: '' },
			        { data: 'assetType' },
			        { data: 'assetName' },
			        { data: 'branchname' },
			        { data: 'status' },
			        { data: 'custodian' },
			        { data: 'lastupdate' },
			      ],
			      
			      columnDefs: [
			    	  
			    	  {
				          // For Checkboxes
				          targets: 0,
				          orderable: false,
				          responsivePriority: 3,
				          searchable: false,
				          checkboxes: true,
				          render: function(data, type, full, meta) {
				            return `<button type="button" class="btn btn-label-primary" onclick="hiderow(${full.assetId});">Add</button>`;
				          },
				        },
			      ],
			      
			      "rowCallback": function(row, data) {
			          $(row).attr("id", "row_" + data.assetId); // assuming the first column contains the unique ID
			          console.log(data.assetId,row);
			        },
			       
				      
				     
	      
	    });
 
	    function cart_count() {
			var count = 0;
			$('.removefromcart').each(function(index) {
				count++;
			});
			$('#cartcount').text(count);

			$('#totalcartval').text(count);
		}
	    
	    
	    function hiderow(id){
	    	var currentRow = $('#row_'+id);
	    	var col1 = currentRow.find( "td:eq(1)").html();
			var col2 = currentRow.find( "td:eq(2)").html();
			var col3 = currentRow.find( "td:eq(3)").html();
			var col4 = currentRow.find( "td:eq(4)").html();
			var col5 = currentRow.find( "td:eq(5)").html();
			var col6 = currentRow.find( "td:eq(6)").html();
			$('#cart > tbody:last-child') .append(`<tr><td><button type='button' name="${id}" class='btn btn-icon btn-secondary mr-1 mb-1 removefromcart'><i class='bx bx-trash'></i></button></td><td>${col1}</td><td>${col2}</td><td>${col3}</td><td>${col4}</td><td>${col5}</td><td>${col6}</td></tr>`);
			
			currentRow.fadeTo("slow", 0.7, function() {
				        currentRow .fadeOut();
						currentRow.hide();
					});
			cart_count();
	    }
	    
	      
	    $(document).on("click",".removefromcart",function() {
	    	 $(this).closest("tr").remove();
	    	 var id = $(this).attr('name');
	    	 $('#row_'+id).fadeTo("slow",1,function() {
					$('#row_'+id).fadeIn();
					$('#row_'+id).show();
				});
  			cart_count();
	    })
    </script>
  </body>
</html>