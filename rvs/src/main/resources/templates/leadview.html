<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en"
	class="light-style layout-navbar-fixed layout-menu-fixed" dir="ltr"
	data-theme="theme-default" th:data-assets-path="@{/assets/}"
	data-template="vertical-menu-template">
<head>
<meta name="_csrf" th:content="${_csrf.token}" />
<!-- default header name is X-CSRF-TOKEN -->
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

<title>Lead View</title>

<meta name="description" content="" />



<!-- Favicon -->
<link rel="icon" type="image/x-icon"
	th:href="@{/assets/img/favicon/favicon.ico}" />

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
	rel="stylesheet" />

<!-- Icons -->
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/boxicons.css}" />
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/fontawesome.css}" />
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/flag-icons.css}" />

<!-- Core CSS -->
<link rel="stylesheet" th:href="@{/assets/vendor/css/rtl/core.css}"
	class="template-customizer-core-css" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/css/rtl/theme-default.css}"
	class="template-customizer-theme-css" />
<link rel="stylesheet" th:href="@{/assets/css/demo.css}" />

<!-- Vendors CSS -->
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/animate-css/animate.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/sweetalert2/sweetalert2.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/flatpickr/flatpickr.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/select2/select2.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/tagify/tagify.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/formvalidation/dist/css/formValidation.min.css}" />

<!-- Page CSS -->

<link rel="stylesheet"
	th:href="@{/assets/vendor/css/pages/page-user-view.css}" />
<!-- Helpers -->
<script th:src="@{/assets/vendor/js/helpers.js}"></script>

<!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
<!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
<script th:src="@{/assets/vendor/js/template-customizer.js}"></script>
<!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
<script th:src="@{/assets/js/config.js}"></script>

<style type="text/css">
.contacteditbtn {
	cursor: pointer;
}
</style>

</head>

<body>
	<!-- Layout wrapper -->
	<div class="layout-wrapper layout-content-navbar">
		<div class="layout-container">
			<!-- Menu -->
			<div th:insert="menu"></div>
			<!-- / Menu -->

			<!-- Layout container -->
			<div class="layout-page">
				<!-- Navbar -->
				<div th:insert="header"></div>
				<!-- / Navbar -->

				<!-- Content wrapper -->
				<div class="content-wrapper">
					<!-- Content -->

					<div class="container-xxl flex-grow-1 container-p-y">
						<h4 class="py-3 breadcrumb-wrapper mb-4">
							<span class="text-muted fw-light">Works /<a
								href="leadlist">Lead</a>/
							</span> View
						</h4>
						<div class="row gy-4">
							<!-- User Sidebar -->
							<div class="col-xl-4 col-lg-5 col-md-5 order-1 order-md-0">
								<!-- User Card -->
								<div class="card mb-4">
									<div class="card-body">
										<div class="user-avatar-section">
											<div class="d-flex align-items-center flex-column">
												<img class="img-fluid rounded my-4"
													th:src="@{/assets/img/logo/rvslogo1.png}" height="110"
													width="110" alt="User avatar" />
												<div class="user-info text-center">
													<h5 class="mb-2" th:text="${leadMaster.Title}"
														id="Lbl_Title"></h5>

												</div>
											</div>
										</div>

										<h5 class="pb-2 border-bottom mb-4">Details</h5>
										<div class="info-container">
											<ul class="list-unstyled">
												<li class="mb-3"><span class="fw-bold me-2">Label:</span>
													<span id="Lbl_Label"> <span
														th:if="${leadMaster.Label} =='Hot'"
														class="badge bg-danger" th:text="${leadMaster.Label}"></span>
														<span th:if="${leadMaster.Label} =='Warm'"
														class="badge bg-warning" th:text="${leadMaster.Label}"></span>
														<span th:if="${leadMaster.Label} =='Cold'"
														class="badge bg-primary" th:text="${leadMaster.Label}"></span>
												</span></li>

												<li class="mb-3"><span class="fw-bold me-2">Source:</span>
													<span th:text="${leadMaster.Source}" id="Lbl_Source"></span>
												</li>

												<li class="mb-3"><span class="fw-bold me-2">Reference:</span>
													<span th:text="${leadMaster.Reference}" id="Lbl_Reference"></span>
												</li>
												<li class="mb-3"><span class="fw-bold me-2">Notes:</span>
													<span th:text="${leadMaster.notes}" id="Lbl_notes"></span>
												</li>
												<li class="mb-3"><span class="fw-bold me-2">Follower:</span>
													<span th:text="${leadMaster.Followername}"
													id="Lbl_follower"></span></li>


											</ul>
											<div class="d-flex justify-content-center pt-3">
												<a href="javascript:;" class="btn btn-primary me-3"
													data-bs-target="#editleadMasterdetails"
													data-bs-toggle="modal"
													id="editOrganizationContactsdetailsbtn">Edit</a>

											</div>
										</div>
									</div>
								</div>
								<!-- /User Card -->


							</div>
							<!--/ User Sidebar -->




						</div>

						<!-- Modal -->

						<!-- Edit User Modal -->
						<div class="modal fade" id="editleadMasterdetails" tabindex="-1"
							aria-hidden="true">
							<div class="modal-dialog modal-lg modal-simple modal-edit-user">
								<div class="modal-content p-3 p-md-5">

									<div class="modal-body">
										<button type="button" class="btn-close"
											data-bs-dismiss="modal" aria-label="Close"></button>
										<div class="text-center mb-4">
											<h3>Edit Lead Information</h3>
											<p>Update Lead Basic Information</p>
										</div>
										<form id="editleadMasterdetailsForm" th:object="${leadMaster}"
											class="row g-3 needs-validation" onsubmit="return false">
											<input type="hidden" th:value="${leadMaster['id']}"
												id="leadMasterID" name="leadMasterID" />


											<div class="col-12 col-md-6">
												<label class="form-label" for="Title">TITLE</label>
												<div>
													<input type="text" id="Title" name="Title"
														class="form-control  capitalize"
														th:value="${leadMaster['Title']}" required>

												</div>

											</div>
											<div class="col-12 col-md-6">
												<label class="form-label" for="Source">SOURCE <label
													class="emptitle additem" name="addsourcedata"><i
														class="bx bxs-plus-circle ownstyle1"></i></label></label>
												<div>
													<select class="form-control  addsourcedata" id="Source"
														name="Source" th:value="${leadMaster['Source']}">
														<th:block th:each="str :${SOURCE}">
															<option th:value="${str}" th:text="${str}"></option>
														</th:block>
													</select>
												</div>

											</div>
											<div class="col-12 col-md-6">
												<label class="form-label" for="Reference">REFERENCE</label>
												<div>

													<select class="form-control " id="Reference"
														name="Reference" th:value="${leadMaster['Reference']}">
														<option value="">-</option>
														<th:block th:each="str :${personlist}">
															<option th:value="${str.id}" th:text="${str.peoplename}"></option>
														</th:block>
													</select>
												</div>

											</div>

											<div class="col-12 col-md-6">
												<label class="form-label" for="Label">LABEL </label>
												<div>
													<select class="form-control " id="Label" name="Label"
														th:value="${leadMaster['Label']}">
														<option value="Hot">Hot</option>
														<option value="Cold">Cold</option>
														<option value="Warm">Warm</option>
													</select>
												</div>
											</div>

											<div class="col-12 col-md-6">
												<label class="form-label" for="phonenumber">BRANCH</label>
												<div>
													<select class="form-select  form-control " id="branch"
														th:value="${leadMaster['id']}" name="branch" required>
														<th:block th:each="str :${branchlist}">
															<option th:value="${str.id}" th:text="${str.BRANCH_NAME}"></option>
														</th:block>
													</select>

												</div>
											</div>
											<div class="col-12 col-md-6">
												<label class="form-label" for="followers">FOLLOWER</label>
												<div>
													<select class="form-select followers form-control "
														id="followers" name="followers"
														th:value="${leadMaster['follower']}" required>
														<th:block th:each="str :${employeelist}">
															<option th:value="${str.empMasterid}"
																th:text="${str.StaffName}"></option>
														</th:block>
													</select>

													<div class="invalid-feedback">Please select follower.</div>
												</div>
											</div>
											<div class="col-12 col-md-6">
												<label class="form-label" for="notes">NOTES</label>
												<div>

													<input type="text" id="notes" name="notes"
														th:value="${leadMaster['notes']}"
														class="form-control  capitalize">
												</div>
											</div>


											<div class="col-12 text-center mt-4">
												<button type="submit"
													class="btn btn-primary editorganizationdatasubmit me-sm-3 me-1">Update</button>
												<button type="button"
													class="btn btn-label-secondary editorganizationdataclose"
													data-bs-dismiss="modal" aria-label="Close">Cancel</button>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
						<!--/ Edit User Modal -->

						<!--scrolling content Modal -->
						<div class="modal fade" id="ItemStatusScrollable" tabindex="-1"
							role="dialog" aria-labelledby="ItemStatusScrollableTitle"
							aria-hidden="true">
							<div class="modal-dialog modal-dialog-scrollable" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title white" id="ItemStatusScrollableTitle"></h5>
										<button type="button" class="btn-close"
											data-bs-dismiss="modal" aria-label="Close"></button>
									</div>
									<div class="modal-body">
										<div class="col-md-12">
											<div class="form-group">
												<label for="addmodel" id="additemalltxt"></label>
												<div class="position-relative">
													<fieldset class="form-group">
														<input type="text" id="additemall" name="addmodel"
															class="form-control capitalize">
													</fieldset>
												</div>
											</div>
										</div>

									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-light-secondary"
											data-bs-dismiss="modal">
											<i class="bx bx-x d-block d-sm-none"></i> <span
												class="d-none d-sm-block">Close</span>
										</button>
										<button type="button" class="btn btn-primary ml-1"
											id="additemallsavebtn">
											<i class="bx bx-check d-block d-sm-none"></i> <span
												class="d-none d-sm-block">ADD</span>
										</button>
									</div>
								</div>
							</div>
						</div>
						<!--scrolling content Modal -->
						<!-- /Modal -->
					</div>
					<!-- / Content -->

					<!-- Footer -->
					<footer class="content-footer footer bg-footer-theme">
						<div
							class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
							<div class="mb-2 mb-md-0"></div>
							<div></div>
						</div>
					</footer>
					<!-- / Footer -->

					<div class="content-backdrop fade"></div>
				</div>
				<!-- Content wrapper -->
			</div>
			<!-- / Layout page -->
		</div>

		<!-- Overlay -->
		<div class="layout-overlay layout-menu-toggle"></div>

		<!-- Drag Target Area To SlideIn Menu On Small Screens -->
		<div class="drag-target"></div>
	</div>
	<!-- / Layout wrapper -->


	<!-- Core JS -->
	<!-- build:js assets/vendor/js/core.js -->
	<script th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
	<script th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
	<script th:src="@{/assets/vendor/js/bootstrap.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>

	<script th:src="@{/assets/vendor/libs/hammer/hammer.js}"></script>

	<script th:src="@{/assets/vendor/libs/i18n/i18n.js}"></script>
	<script th:src="@{/assets/vendor/libs/typeahead-js/typeahead.js}"></script>

	<script th:src="@{/assets/vendor/js/menu.js}"></script>
	<!-- endbuild -->

	<!-- Vendors JS -->
	<script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
	<script th:src="@{/assets/vendor/libs/datatables/jquery.dataTables.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-responsive/datatables.responsive.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons/datatables-buttons.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.js}"></script>
	<script th:src="@{/assets/vendor/libs/jszip/jszip.js}"></script>
	<script th:src="@{/assets/vendor/libs/pdfmake/pdfmake.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons/buttons.html5.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons/buttons.print.js}"></script>
	<script th:src="@{/assets/vendor/libs/sweetalert2/sweetalert2.js}"></script>
	<script th:src="@{/assets/vendor/libs/cleavejs/cleave.js}"></script>
	<script th:src="@{/assets/vendor/libs/cleavejs/cleave-phone.js}"></script>
	<script th:src="@{/assets/vendor/libs/select2/select2.js}"></script>
	<!-- Form Validation -->
	<script
		th:src="@{/assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js}"></script>

	<!-- Main JS -->
	<script th:src="@{/assets/js/main.js}"></script>

	<!-- Flat Picker -->
	<script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
	<script th:src="@{/assets/vendor/libs/flatpickr/flatpickr.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.js}"></script>
	<script th:src="@{/assets/vendor/libs/pickr/pickr.js}"></script>
	<script th:src="@{/assets/vendor/libs/tagify/tagify.js}"></script>
	<!-- Page JS -->
	<!-- <script th:src="@{/assets/js/modal-edit-user.js}"></script> -->
	<script th:src="@{/assets/js/app-user-view.js}"></script>
	<script th:src="@{/assets/js/app-user-view-account.js}"></script>



	<script>
    $(document).ready(function() {  
    	//--------------------------------------------------------------------------------------------------------------------------------------
    	 
		//--------------------------------------------------------------------------------------------------------------------------------------		 		

		$(function() {
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			$(document).ajaxSend(function(e, xhr, options) {
				xhr.setRequestHeader(header, token);
			});
		});
		// --------------------------------------------------------------------
		//--------------------------------------------------------------------------------------------------------------------------------------
    	// Custom list & inline suggestion
	  //------------------------------------------------------
	   $.ajax({
							type : "GET",url : "leadcplist",
							data : "", success : function(result) {
								
								const ContactPersonTagifyEl = document.querySelector('#ContactPersonTagify');
								 
								  const whitelist = result;
								  // Inline
								  let ContactPersonTagify = new Tagify(ContactPersonTagifyEl, {
								    whitelist: whitelist,
								    maxTags: 1,
								    dropdown: {
								      maxItems: 20,
								      classname: 'tags-inline',
								      enabled: 0,
								      closeOnSelect: false
								    }
								  });
								
							}
	   });
	 //--------------------------------------------------------------------------------------  
	   const TagifyCustomListSuggestionEl = document.querySelector('#organization');

	  $.ajax({
				type : "GET",url : "organizationNameListtype1",
				data : '', success : function(result) {
					
					 // List
				    let TagifyCustomListSuggestion = new Tagify(TagifyCustomListSuggestionEl, {
				      whitelist: result,
				      maxTags: 1,
				      dropdown: {
				        maxItems: 20,
				        classname: 'tags-inline',
				        enabled: 0,
				        closeOnSelect: false
				      }
				    });
					 
				}
	  });
		//--------------------------------------------------------------------------------------------------------------------------------------		 
		
   		function validationformreset()
	   {
			
   				$('.editorganizationdataclose').click();
   				$('.editorganizationdatasubmit').prop("disabled",false);
	   			$('.editorganizationdatasubmit').html("Submit");
	   }
   		
		//--------------------------------------------------------------------------------------------------------------------------------------		 
	

		 $('#editleadMasterdetailsForm').on('submit', function(event){
			
        	 
			 if(event.target.checkValidity()){
		    	    	$('.editorganizationdatasubmit').prop("disabled",true);
		    	    	$('.editorganizationdatasubmit').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
		    	    	const formData= new FormData(document.querySelector("#editleadMasterdetailsForm"));
		    	    	
		           	 for (var pair of formData.entries()) {
		           	    console.log(pair); 
		           	}
		  				 $.ajax({
		  						type : "POST",url : "leadsavestage2",
		  						processData: false,
		  					    contentType: false,
		  						data :formData, success : function(result) {
		  							var bmobj = JSON.parse(JSON.stringify(result));
		  							console.log(bmobj);
		  							
		  							if(bmobj.label =="Hot")
		  							{
		  								$('#Lbl_Label').html("<span class='badge bg-danger'>Hot</span>");
		  							}else if(bmobj.label =="Warm")
		  							{
		  								$('#Lbl_Label').html("<span class='badge bg-warning'>Warm</span>");
		  							}else
	  								{
		  								$('#Lbl_Label').html("<span class='badge bg-primary'>Cold</span>");
	  								}
		  							
		  							$('#Lbl_Title').text(bmobj.title);
		  							$('#Lbl_Source').text(bmobj.source);
		  							$('#Lbl_follower').text(bmobj.followername);
		  							$('#Lbl_notes').text(bmobj.notes);
		  							
		  							$('.editorganizationdataclose').click();
		  			   				$('.editorganizationdatasubmit').prop("disabled",false);
		  				   			$('.editorganizationdatasubmit').html("Submit");
			  						 
		  						},
		  						error : function(e) {
		  							console.log("Error" + e);
		  						}
		  					});
		  	        }	
		    	    else
		        	{
		    	    	$('.editorganizationdatasubmit').prop("disabled",false);
		        	}

	   		 
		    	
		      });
		// --------------------------------------------------------------------
	     	
  				// --------------------------------------------------------------------
  				
  				$(".additem").click(function() {
					var name = $(this).attr('name');
					var labeltext = "";
					if (name == "addmodalcontacttype") {
						labeltext = "New Contact Type";
					}else if(name == "addmodaldocumenttype")
					{
						labeltext = "New Document Type";
					}else if(name == "addModel_Source")
					{
						labeltext = "New Industry Type";
					}
					
					$('#additemalltxt').text(labeltext);
					$('#ItemStatusScrollable').modal('toggle');

				});

				$("#additemallsavebtn").click(
						function() {
					if ($("#additemall").val() != '') {
						var name = $('#additemalltxt').text();
						var labeltext = "";
						if (name == "New Contact Type") {
							labeltext = "modalcontacttype";
						}else if (name == "New Document Type") {
							labeltext = "modalDocumenttype";
						}else if (name == "New Industry Type") {
							labeltext = "addModel_Source";
						}
						
						$('.' + labeltext).append(
								"<option value='"
										+ $("#additemall").val()
										+ "'>"
										+ $("#additemall").val()
										+ "</option>");
						//$('.' + labeltext).val($("#additemall").val());
						$("#additemall").val('');
						$('#ItemStatusScrollable').modal(
								'toggle');
					}
				});
  				
  				// --------------------------------------------------------------------
  				
	  			
		   	//-------------------------------------------
}); // Jquery
    
		
		// Phone
			 const phoneMask = document.querySelector('.phone-number-otp-mask');

		    // Phone Number Input Mask
		    if (phoneMask) {
		      new Cleave(phoneMask, {
		        phone: true,
		        phoneRegionCode: 'US'
		      });
		    }    
	 
			  
		  //--------------------------	 
    </script>
</body>
</html>
