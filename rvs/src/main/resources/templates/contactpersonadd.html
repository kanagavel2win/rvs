<!DOCTYPE html>

<html
  xmlns:th="http://www.thymeleaf.org" 
  lang="en"
  class="light-style layout-navbar-fixed layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  th:data-assets-path="@{/assets/}"
  data-template="vertical-menu-template"
  
>
  <head>
  	<meta name="_csrf" th:content="${_csrf.token}" />
	<!-- default header name is X-CSRF-TOKEN -->
	<meta name="_csrf_header" th:content="${_csrf.headerName}" />
  
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>ContactPerson View</title>

	  <meta name="description" content="" />
	  
	  

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/assets/img/favicon/favicon.ico}" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link rel="stylesheet" th:href="@{/assets/vendor/fonts/boxicons.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/fonts/fontawesome.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/fonts/flag-icons.css}" />

    <!-- Core CSS -->
    <link rel="stylesheet" th:href="@{/assets/vendor/css/rtl/core.css}" class="template-customizer-core-css" />
    <link rel="stylesheet" th:href="@{/assets/vendor/css/rtl/theme-default.css}" class="template-customizer-theme-css" />
    <link rel="stylesheet" th:href="@{/assets/css/demo.css}" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/animate-css/animate.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/sweetalert2/sweetalert2.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/flatpickr/flatpickr.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/select2/select2.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/tagify/tagify.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/formvalidation/dist/css/formValidation.min.css}" />

    <!-- Page CSS -->

    <link rel="stylesheet" th:href="@{/assets/vendor/css/pages/page-user-view.css}" />
    <!-- Helpers -->
    <script th:src="@{/assets/vendor/js/helpers.js}"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script th:src="@{/assets/vendor/js/template-customizer.js}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script th:src="@{/assets/js/config.js}"></script>

<style type="text/css">
.contacteditbtn
{
cursor:pointer;
}

</style>

  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->
		<div th:insert="menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->
			<div th:insert="header"></div>
          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="py-3 breadcrumb-wrapper mb-4">
                <span class="text-muted fw-light">Administration/<a href="contactspersonlist">People</a>/</span> View
              </h4>
              <div class="row gy-4">
                <!-- User Sidebar -->
                <div class="col-xl-4 col-lg-5 col-md-5 order-1 order-md-0">
                  <!-- User Card -->
                  <div class="card mb-4">
                    <div class="card-body">
                      <div class="user-avatar-section">
                        <div class="d-flex align-items-center flex-column">
                          <img
                            class="img-fluid rounded my-4"
                            th:src="@{/assets/img/logo/rvslogo1.png}" 
                            height="110"
                            width="110"
                            alt="User avatar"
                          />
                          <div class="user-info text-center">
                            <h5 class="mb-2" th:text="${ContactPerson.peoplename}"></h5>
                            <span class="badge bg-label-secondary" th:text="${ContactPerson.customer_supplier}" ></span>
                          </div>
                        </div>
                      </div>
                     <!--  <div class="d-flex justify-content-around flex-wrap my-4 py-3">
                        <div class="d-flex align-items-start me-4 mt-3 gap-3">
                          <span class="badge bg-label-primary p-2 rounded"><i class="bx bx-user bx-sm"></i></span>
                          <div>
                            <h5 class="mb-0">0</h5>
                            <span>Deals</span>
                          </div>
                        </div>
                        <div class="d-flex align-items-start mt-3 gap-3">
                          <span class="badge bg-label-primary p-2 rounded"><i class="bx bx-detail bx-sm"></i></span>
                          <div>
                            <h5 class="mb-0">0</h5>
                            <span>Projects</span>
                          </div>
                        </div>
                      </div> -->
                      <h5 class="pb-2 border-bottom mb-4">Details</h5>
                      <div class="info-container">
                        <ul class="list-unstyled">
                          <li class="mb-3">
                            <span class="fw-bold me-2">Branch:</span>
                            <span th:text="${ContactPerson.branchName}" id="Lbl_Branch"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Type:</span>
                            <span  th:text="${ContactPerson.customer_supplier}" id="Lbl_customer_supplier"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Name:</span>
                            <span  th:text="${ContactPerson.peoplename}" id="Lbl_peoplename"></span>
                          </li>
                          
                          <li class="mb-3">
                            <span class="fw-bold me-2">Organization:</span>
                            <span th:text="${ContactPerson.organizationname}"  id="Lbl_organization"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Designation:</span>
                            <span th:text="${ContactPerson.designation}" id="Lbl_designation"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Member in:</span>
                            <span th:text="${ContactPerson.memberin}"  id="Lbl_memberin"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">RM:</span>
                            <span th:text="${ContactPerson.followername}"  id="Lbl_followername"></span>
                          </li>
                          
                        
                        </ul>
                        <div class="d-flex justify-content-center pt-3">
                          <a
                            href="javascript:;"
                            class="btn btn-primary me-3"
                            data-bs-target="#editContactPersondetails"
                            data-bs-toggle="modal"
                            id="editContactPersondetailsbtn"
                            >Edit</a
                          >
                          
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /User Card -->
                  
                   <!-- Address Card -->
                  
                  <div class="card mb-4">
                    <div class="card-body">
                      <h5 class="pb-2 border-bottom mb-4">Address</h5>
                      <div class="info-container">
                        <ul class="list-unstyled">
                          <li class="mb-3">
                            <span class="fw-bold me-2">Country:</span>
                            <span th:text="${ContactPerson.addressCountry}" id="Lbl_AddressCountry"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Address Line 1:</span>
                            <span  th:text="${ContactPerson.addressStreet1}"  id="Lbl_AddressAddress1"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Address Line 2:</span>
                            <span  th:text="${ContactPerson.addressStreet2}"  id="Lbl_AddressAddress2"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Landmark:</span>
                            <span th:text="${ContactPerson.addressLankmark}"  id="Lbl_AddressLandmark"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">Village:</span>
                            <span th:text="${ContactPerson.addressVillage}" id="Lbl_AddressVillage"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">City/Town:</span>
                            <span th:text="${ContactPerson.addressCity}"  id="Lbl_AddressCity"></span>
                          </li>
                          <li class="mb-3">
                            <span class="fw-bold me-2">State:</span>
                            <span th:text="${ContactPerson.addressState}" id="Lbl_AddressState"></span>
                          </li>
                        <li class="mb-3">
                            <span class="fw-bold me-2">Pin code:</span>
                            <span th:text="${ContactPerson.addressZIP}" id="Lbl_AddressZipCode"></span>
                          </li>
                        </ul>
                        <div class="d-flex justify-content-center pt-3">
                          <a
                            href="javascript:;"
                            class="btn btn-primary me-3"
                            data-bs-target="#addNewAddress"
                            data-bs-toggle="modal"
                            >Edit</a
                          >
                          
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /Address Card -->
                  <!-- Contact Card -->
                  <div class="card  mb-4">
                    <div class="card-body1">
                      <div class="card-header align-items-center">
                      <h5 class="card-action-title mb-0">Contacts
                      <div class="card-action-element" style="float:right">
                        <button
                          class="btn btn-primary btn-sm addcontactbtn"
                          type="button"
                          name="-"
                          data-bs-toggle="modal"
                          data-bs-target="#addNewContact"
                        >
                          <i class="bx bx-plus bx-xs me-1"></i>
                        </button>
                      	</div>
                        </h5>
                      
                    </div>
                    <div class="card-body">
                      <div class="added-cards">
                      	<th:block th:each="contactObj : ${ContactPerson.contactPersonContact}">
                        <div th:class="'cardMaster border p-3 rounded mb-3 card'+ ${contactObj.contactid}">
                          <div class="d-flex justify-content-between flex-sm-row flex-column">
                            <div class="card-information">
                              <input type="hidden" th:class="'primarycontact'+ ${contactObj.contactid}" th:value="${contactObj.primarycontact}"/>
                              <h6 th:class="'mb-3 contacteditbtn contacttype'+ ${contactObj.contactid}" th:text="${contactObj.Department}"  th:name="${contactObj.contactid}" ></h6>
                              <h6 th:class="'mb-1 phonenumber'+ ${contactObj.contactid}" th:text="${contactObj.Phonenumber}"></h6>
                              <span th:class="'card-number email'+ ${contactObj.contactid}" th:text="${contactObj.Email}"></span
                              >
                             <span th:class="'primarycontactlablecontainer'+ ${contactObj.contactid}"> <span th:if="${contactObj.primarycontact}" class="badge bg-label-primary">Primary</span></span>
                            </div>
                            <div class="d-flex flex-column text-start text-lg-end">
                              <div class="d-flex order-sm-0 order-1 mt-3">
                             
                                <button class="btn btn-label-secondary contactdeletebtn" th:name="${contactObj.contactid}"><i class='bx bxs-trash-alt'></i></button>
                                
                              </div>
                              
                            </div>
                          </div>
                        </div>
                       	</th:block>
                       	<span id="contactaddidv"></span>
                       </div>
                    </div>
                    </div>
                  </div>
                  <!-- /Contact Card -->
                  <!-- Document   Card -->
                   <div class="card  mb-4">
                    <div class="card-body1">
                      <div class="card-header align-items-center">
                      <h5 class="card-action-title mb-0">Documents  
                      <div class="card-action-element" style="float:right">
                        <button
                          class="btn btn-primary btn-sm"
                          type="button"
                          data-bs-toggle="modal"
                          data-bs-target="#addNewDocument"
                        >
                          <i class="bx bx-plus bx-xs me-1"></i> 
                        </button>
                      	</div>
                        </h5>
                      
                    </div>
                    <div class="card-body">
                      <div class="added-cards">
                        <th:block th:each="fileObj : ${ContactPerson.contactPersonFiles}">
	                        <div th:class="'cardMaster border p-3 rounded mb-3 filecard' + ${fileObj.filesid}">
	                          <div class="d-flex justify-content-between flex-sm-row flex-column">
	                            <div class="card-information">
	                              
	                              <h6 class="mb-1" th:text="${fileObj.DocumentType}"></h6>
	                              <span class="card-number" th:text="${fileObj.DocumentNo}"></span>
                              	
                              	<th:block th:if="${fileObj.FilePath != ''}">
                              	<br/>
                                	<a th:href="${fileObj.FilePath}" target="_blank">
                                		<th:block th:if="${#strings.arraySplit(fileObj.FilePath,'.')[1]} == 'pdf'">
                                			<img th:src="@{/assets/img/icons/misc/pdf.png}" alt="PDF image" width="20" class="me-2">
                                		</th:block>
                                		<th:block th:unless="${#strings.arraySplit(fileObj.FilePath,'.')[1]} == 'pdf'">
                                			<img th:src="@{/assets/img/icons/misc/jpg.png}" alt="PDF image" width="20" class="me-2">
                                		</th:block>
                                		<small class="text-body" th:text="${#strings.substring(#strings.arraySplit(fileObj.FilePath,'/')[1],15)}">
                                		</small>
                                	</a>
                                </th:block>
	                                
	                            </div>
	                            <div class="d-flex flex-column text-start text-lg-end">
	                              <div class="d-flex order-sm-0 order-1 mt-3">
	                                
	                                <button class="btn btn-label-secondary filedeletebtn" th:name="${fileObj.filesid}"><i class='bx bxs-trash-alt'></i></button>
	                              </div>
	                              
	                            </div>
	                          </div>
	                        </div>
                       
                       	</th:block>
                       	<span id="fileaddidv"></span>
                       </div>
                    </div>
                    </div>
                  </div>
               
                  <!-- /Document   Card -->
                 <!-- Bank Account Card -->
                  <div class="card mb-4">
                    <div class="card-body">
                      <h5 class="pb-2 border-bottom mb-4">Bank Details
                       
                        <div class="card-action-element" style="float:right">
                        <button
                          class="btn btn-primary btn-sm collapsetogglebtn"
                          type="button"
                          data-bs-toggle="collapse"
                          href="#bankdetailscollapseExample"
                          aria-expanded="false"
                          aria-controls="bankdetailscollapseExample"
                        >
                          <i id="collapsetoggleicon" class="bx bx-chevron-down bx-xs me-1"></i>
                        </button>
                      	</div>
                      </h5>
                      
                      <div class="info-container collapse" id="bankdetailscollapseExample">
                      
                      
                         <ul class="list-unstyled" th:with ="accobj = ${ContactPerson.contactPersonAccNo[0]}">
	                          <li class="mb-3">
	                            <span class="fw-bold me-2">A.C.No:</span>
	                            <span th:text="${accobj.acno}" id="Lbl_acno"></span>
	                          </li>
	                          <li class="mb-3">
	                            <span class="fw-bold me-2">Account Name:</span>
	                            <span  th:text="${accobj.acname}"  id="Lbl_acname"></span>
	                          </li>
	                          <li class="mb-3">
	                            <span class="fw-bold me-2">Bank Name:</span>
	                            <span  th:text="${accobj.bankname}"  id="Lbl_bankname"></span>
	                          </li>
	                          <li class="mb-3">
	                            <span class="fw-bold me-2">Branch Name:</span>
	                            <span th:text="${accobj.branchname}"  id="Lbl_branchname"></span>
	                          </li>
	                          <li class="mb-3">
	                            <span class="fw-bold me-2">IFSC Code:</span>
	                            <span th:text="${accobj.ifsccode}" id="Lbl_ifsccode"></span>
	                          </li>
	                        </ul>
                        
                        <div class="d-flex justify-content-center pt-3">
                          <a
                            href="javascript:;"
                            class="btn btn-primary me-3"
                            data-bs-target="#addNewBankDetails"
                            data-bs-toggle="modal"
                            >Edit</a
                          >
                          
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /Bank Account Card -->
                
                </div>
                <!--/ User Sidebar -->

            
              	
              
              </div>

              <!-- Modal -->
              
              <!-- Edit User Modal -->
              <div class="modal fade" id="editContactPersondetails" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-simple modal-edit-user">
                  <div class="modal-content p-3 p-md-5">
                  
                    <div class="modal-body">
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      <div class="text-center mb-4">
                        <h3>Edit Person Information</h3>
                        <p>Update Person Basic Information</p>
                      </div>
                      <form id="editContactPersondetailsForm" th:object="${ContactPerson}" class="row g-3 needs-validation" onsubmit="return false">
						<input type="hidden" th:value="${ContactPerson['id']}" id="ContactPersonID" th:field="*{id}"/>
	                    
	                    <div class="col-12">
                          <label class="form-label" for="Model_branchid">Branch</label>
                          <select
                            class="form-select"
                            aria-label="Default select example" 
                            id="Model_branchid"
                            th:field="*{branchid}" 
                            th:value="${ContactPerson['branchid']}"
                            required
                          >
                             
                             <option th:each="obj : ${branchMasterList}" th:value="${obj.id}" th:text="${obj.BRANCH_NAME +'-'+ obj.BranchCode}"></option>
                          
                          </select>
                          <div class="invalid-feedback">Please Select Branch</div>
                        </div>
                        
                    	<div class="col-12 col-md-6">
                          <div class="form-check custom-option custom-option-icon">
                            <label class="form-check-label custom-option-content" for="radioSupplier">
                              <span class="custom-option-body">
                                
                                <span class="custom-option-title">Supplier</span>
                                
                              </span>
                              <input
                                name="customer_supplier"
                                th:field="*{customer_supplier}"
                                type="radio"
                                value="Supplier"
                                id="radioSupplier"
                                required
                              />
                            </label>
                          </div>
                        </div>
                        <div class="col-12 col-md-6">
                          <div class="form-check custom-option custom-option-icon"  >
                            <label class="form-check-label custom-option-content" for="radioCustomer">
                              <span class="custom-option-body">
                                
                                <span class="custom-option-title">Customer</span>
                                <!-- <small> Subordinate to the Head Office. </small> -->
                              </span>
                              <input
                                name="customer_supplier"
                                th:field="*{customer_supplier}"
                                type="radio"
                                value="Customer"
                                id="radioCustomer"
                                required
                              />
                            </label>
                          </div>
                        </div>
	                      
	                    
                        <div class="col-12 col-md-6">
                                
	                              
                          <label class="form-label" for="modaleditContactPersondetailsFirstName">Name</label>
                          <input
                            type="text"
                            class="form-control"
                            id="Model_peoplename"
                            th:value="${ContactPerson['peoplename']}"
                            required
                          />
                          <div class="invalid-feedback">Please enter Person Name.</div>
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="modaleditContactPersondetailsFirstName">Organization</label>
                           <input
                            id="Model_organization"
                            name="organization"
                            class="form-control"
                            th:value="${ContactPerson['organizationname']}"
                            placeholder="select Organization"
                            
                          />
                          <div class="invalid-feedback">Please enter Organization.</div>
                        </div>
                        
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="Model_designation">Designation </label>
                          <input
                            type="text"
                            class="form-control"
                            id="Model_designation"
                            th:value="${ContactPerson['designation']}"
                            
                          />
                          <div class="invalid-feedback">Please enter Designation.</div>
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="Model_memberin">Member in
                          	<label class="emptitle additem" name="addModel_memberin">
                          		<i class="bx bxs-plus-circle ownstyle1"></i></label>
                          		
                          </label>
                          <select class="form-select addModel_memberin" id="Model_memberin" 
                          th:field="*{memberin}"
                          th:value="${ContactPerson['memberin']}"
                          >
                           <option value="">Select Member in</option>
                           
                           <option th:each="str :${MEMBERIN}" th:value="${str}"  th:text="${str}"></option> 
                           
                         </select>
                         <div class="invalid-feedback">Please enter Member in.</div>
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="Model_memberin">RM</label>
                         
                        <select class="form-select" id="Model_Relationmanger"   th:field="*{followers}"
                          th:value="${ContactPerson['followers']}" required>
                           <option value="">Select Person Type</option>
                           <option th:each="obj : ${EffectiveEmployee}" th:value="${obj.empMasterid}" th:text="${obj.StaffName}"></option>
                           
                         </select>
                         <div class="invalid-feedback">Please enter RM.</div>
                        </div>
                       
                        <div class="col-12 text-center mt-4">
                          <button type="submit" class="btn btn-primary editcontactPersondatasubmit me-sm-3 me-1">Update</button>
                          <button
                            type="button"
                            class="btn btn-label-secondary editcontactPersondataclose"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          >
                            Cancel
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Edit User Modal -->

              <!-- Add New Contact Modal -->  
              <div class="modal fade" id="addNewContact" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered1 modal-simple modal-add-new-cc">
                  <div class="modal-content p-3 p-md-5">
                    <div class="modal-body">
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      <div class="text-center mb-4">
                        <h3>Contact Details</h3>
                        <p>Add/Update Contact Information</p>
                      </div>
                      <form id="addContactform" class="row g-3" onsubmit="return false">
                        <div class="col-12">
                          <label class="form-label w-100" for="modalAddCard">Contact Type 
                          <label class="emptitle additem" name="addmodalcontacttype"><i
																class="bx bxs-plus-circle ownstyle1"></i></label>
                          </label>
                          <div class="input-group input-group-merge">
                            <select id="modalcontacttype" class="form-select modalcontacttype" required>
	                         
	                         <option value="">-</option>
							<th:block th:each="str :${CONTACTTYPE}">
								<option  th:value="${str}"  th:text="${str}"></option>
							</th:block>
	                         
	                        </select>
	                         <div class="invalid-feedback">Please select contact type</div>
                           <input
                              type="hidden"
                              id="modalcontactid"
                              name="modalcontactid"
                              class="form-contro"
                              
                            />
                          </div>
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalcontactPhone">Phone Number </label>
                          <div class="input-group input-group-merge">
                            <span class="input-group-text">+91</span>
                            <input
                              type="text"
                              id="modalcontactPhone"
                              name="modalcontactPhone"
                              class="form-control phone-number-otp-mask"
                              placeholder="999 555 0111"
                              required
                            />
                            
                          </div>
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalContactemail">Email </label>
                          <input
                            type="email"
                            id="modalContactemail"
                            class="form-control expiry-date-mask"
                            
                          />
                          <div class="invalid-feedback">Please enter a valid email</div>
                        </div>
                        
                        
                        <div class="col-12">
                          <label class="switch">
                            <input type="checkbox" class="switch-input" id="modalcontactprimary"/>
                            <span class="switch-toggle-slider">
                              <span class="switch-on">
                                <i class="bx bx-check"></i>
                              </span>
                              <span class="switch-off">
                                <i class="bx bx-x"></i>
                              </span>
                            </span>
                            <span class="switch-label">Make this as primary contact?</span>
                          </label>
                        </div>
                        
                        <div class="col-12 text-center mt-4">
                          <button type="submit" class="btn  btn-primary me-sm-3 me-1 contactsavebtn">Submit</button>
                          <button
                            type="reset"
                            class="btn btn-label-secondary btn-reset contactclosebtn"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          >
                            Cancel
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Add New Credit Card Modal -->
              <!-- Add New Address Modal -->
              <div class="modal fade" id="addNewAddress" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-simple modal-add-new-address">
                  <div class="modal-content p-3 p-md-5">
                    <div class="modal-body">
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      <div class="text-center mb-4">
                        <h3 class="address-title"> Address</h3>
                        <p class="address-subtitle">Add/Update Address Details</p>
                      </div>
                      <form id="addNewAddressForm"  th:object="${ContactPerson}"  class="row g-3" onsubmit="return false">
                        <div class="col-12">
                          <label class="form-label" for="modalAddressCountry">Country</label>
                          <select
                            id="modalAddressCountry"
                            name="modalAddressCountry"
                            class="select2 form-select"
                            data-allow-clear="true"
                            th:field="*{addressCountry}"
                            th:value="${ContactPerson.addressCountry}"
                            required
                          >
                            <option value="">Select</option>
                            <option value="Australia">Australia</option>
                            <option value="Bangladesh">Bangladesh</option>
                            <option value="Belarus">Belarus</option>
                            <option value="Brazil">Brazil</option>
                            <option value="Canada">Canada</option>
                            <option value="China">China</option>
                            <option value="France">France</option>
                            <option value="Germany">Germany</option>
                            <option value="India">India</option>
                            <option value="Indonesia">Indonesia</option>
                            <option value="Israel">Israel</option>
                            <option value="Italy">Italy</option>
                            <option value="Japan">Japan</option>
                            <option value="Korea">Korea, Republic of</option>
                            <option value="Mexico">Mexico</option>
                            <option value="Philippines">Philippines</option>
                            <option value="Russia">Russian Federation</option>
                            <option value="South Africa">South Africa</option>
                            <option value="Thailand">Thailand</option>
                            <option value="Turkey">Turkey</option>
                            <option value="Ukraine">Ukraine</option>
                            <option value="United Arab Emirates">United Arab Emirates</option>
                            <option value="United Kingdom">United Kingdom</option>
                            <option value="United States">United States</option>
                          </select>
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalAddressAddress1">Address Line 1</label>
                          <input
                            type="text"
                            id="modalAddressAddress1"
                            name="modalAddressAddress1"
                            class="form-control"
                            placeholder="Flat, House no, Building, Apartment"
                            th:value="${ContactPerson.addressStreet1}"
                            required
                          />
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalAddressAddress2">Address Line 2</label>
                          <input
                            type="text"
                            id="modalAddressAddress2"
                            name="modalAddressAddress2"
                            class="form-control"
                            placeholder="Area, Street, Sector"
                            th:value="${ContactPerson.addressStreet2}"
                          />
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalAddressLandmark">Landmark</label>
                          <input
                            type="text"
                            id="modalAddressLandmark"
                            name="modalAddressLandmark"
                            class="form-control"
                            placeholder="E.g. near Kovai All India Radio"
                            th:value="${ContactPerson.addressLankmark}"
                          />
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="modalAddressVillage">Village </label>
                          <input
                            type="text"
                            id="modalAddressVillage"
                            name="modalAddressVillage"
                            class="form-control"
                            th:value="${ContactPerson.addressVillage}"
                          />
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="modalAddressCity">City</label>
                          <input
                            type="text"
                            id="modalAddressCity"
                            name="modalAddressCity"
                            class="form-control"
                            th:value="${ContactPerson.addressCity}"
                            required
                          />
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="modalAddressLandmark">State</label>
                          <input
                            type="text"
                            id="modalAddressState"
                            name="modalAddressState"
                            class="form-control"
                            th:value="${ContactPerson.addressState}"
                            required
                          />
                        </div>
                        <div class="col-12 col-md-6">
                          <label class="form-label" for="modalAddressZipCode">Zip Code</label>
                          <input
                            type="number"
                            id="modalAddressZipCode"
                            name="modalAddressZipCode"
                            class="form-control"
                            th:value="${ContactPerson.addressZIP}"
                            
                          />
                        </div>
                        
                        <div class="col-12 text-center mt-4">
                          <button type="submit" class="btn btn-primary me-sm-3 me-1 editcontactPersonAddressdatasubmit">Update</button>
                          <button
                            type="button"
                            class="btn btn-label-secondary editcontactPersonAddressdataclose"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          >
                            Cancel
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Add New Address Modal -->
              
              <!-- Add Document -->
              <div class="modal fade" id="addNewDocument" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered1 modal-simple modal-add-new-cc">
                  <div class="modal-content p-3 p-md-5">
                    <div class="modal-body">
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      <div class="text-center mb-4">
                        <h3>Add Document  </h3>
                        <p>Attach Files / Documents / Image</p>
                      </div>
                      <form id="addNewdocument" class="row g-3" onsubmit="return false">
                        <div class="col-12">
                          <label class="form-label w-100" for="modalAddCard">Document Type
                          	<label class="emptitle additem" name="addmodaldocumenttype">
                          		<i class="bx bxs-plus-circle ownstyle1"></i></label>
                          		
                           </label>
                          <div class="input-group input-group-merge">
                            <select id="modalDocumenttype" class="form-select modalDocumenttype">
	                          <option value="">Default select</option>
	                          <th:block th:each="str :${Documenttype}">
								<option  th:value="${str}"  th:text="${str}"></option>
							</th:block>
	                         
	                        </select>
                           
                          </div>
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalAddCardName">Document No </label>
                          <input
                            type="text"
                            id="modalDocNo"
                            class="form-control"
                          />
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="modalAddCardExpiryDate">Upload File (Max File Size : 20MB) </label>
                          <input
                            type="file"
                            id="modalFile"
                            class="form-control"
                            accept="image/jpeg,image/png,image/jpg,application/pdf"
                          />
                        </div>
                        <div class="col-12 text-center mt-4">
                          <button type="submit" class="btn btn-primary me-sm-3 me-1 documentsave">ADD</button>
                          <button
                            type="reset"
                            class="btn btn-label-secondary btn-reset documentclose"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          >
                            Cancel
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Add Document -->
             
                <!-- Add BankDetails -->
              <div class="modal fade" id="addNewBankDetails" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered1 modal-simple modal-add-new-cc">
                  <div class="modal-content p-3 p-md-5">
                    <div class="modal-body">
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      <div class="text-center mb-4">
                        <h3>Bank Details  </h3>
                        <p>Add/Update Bank Information</p>
                      </div>
                      <form id="addNewBankDetails" class="row g-3" onsubmit="return false" th:with ="accobj = ${ContactPerson.contactPersonAccNo[0]}">
                        
                        <div class="col-12">
                          <label class="form-label" for="model_acno">A.C.No </label>
                           <input
                            type="hidden"
                            id="model_Accnoid"
                            class="form-control expiry-date-mask" th:value="${accobj.Accnoid}" required
                          />
                          <input
                            type="text"
                            id="model_acno"
                            class="form-control expiry-date-mask" th:value="${accobj.acno}" required
                          />
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="model_acno_confirm">Confirm The A.C.No </label>
                          <input
                            type="password"
                            id="model_acno_confirm" 
                            class="form-control expiry-date-mask" th:value="${accobj.acno}" required
                          /> 
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="model_acname">Account Name</label>
                          <input
                            type="text"
                            id="model_acname"
                            class="form-control expiry-date-mask" th:value="${accobj.acname}" required
                          />
                        </div>
                        <div class="col-12">
                          <label class="form-label" for="model_bankname">Bank Name</label>
                          <input
                            type="text"
                            id="model_bankname"
                            class="form-control expiry-date-mask" th:value="${accobj.bankname}" required
                          />
                        </div>
                        <div class="col-6">
                          <label class="form-label" for="model_BranchName">Branch Name </label>
                          <input
                            type="text"
                            id="model_BranchName"
                            class="form-control expiry-date-mask" th:value="${accobj.branchname}" required
                          />
                        </div>
                        <div class="col-6">
                          <label class="form-label" for="model_ifsccode">IFSC Code  </label>
                          <input
                            type="text"
                            id="model_ifsccode"
                            class="form-control expiry-date-mask" th:value="${accobj.ifsccode}" required
                          />
                        </div>
                        
                        <div class="col-12 text-center mt-4">
                          <button type="submit" class="btn btn-primary me-sm-3 me-1 BankDetailssave">Update</button>
                          <button
                            type="button"
                            class="btn btn-label-secondary btn-reset BankDetailsclose"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          >
                            Cancel
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Add BankDetails -->
               
              <!--scrolling content Modal -->
				<div class="modal fade" id="ItemStatusScrollable"
					tabindex="-1" role="dialog"
					aria-labelledby="ItemStatusScrollableTitle"
					aria-hidden="true">
					<div class="modal-dialog modal-dialog-scrollable"
						role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title white"
									id="ItemStatusScrollableTitle"></h5>
								<button
                                  type="button"
                                  class="btn-close"
                                  data-bs-dismiss="modal"
                                  aria-label="Close"
                                ></button>
							</div>
							<div class="modal-body">
								<div class="col-md-12">
									<div class="form-group">
										<label for="addmodel" id="additemalltxt"></label>
										<div class="position-relative">
											<fieldset class="form-group">
												<input type="text" id="additemall" name="addmodel"
													class="form-control capitalize">
											</fieldset>
										</div>
									</div>
								</div>

							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-light-secondary"
									data-bs-dismiss="modal">
									<i class="bx bx-x d-block d-sm-none"></i> <span
										class="d-none d-sm-block">Close</span>
								</button>
								<button type="button" class="btn btn-primary ml-1"
									id="additemallsavebtn">
									<i class="bx bx-check d-block d-sm-none"></i> <span
										class="d-none d-sm-block">ADD</span>
								</button>
							</div>
						</div>
					</div>
				</div>
				<!--scrolling content Modal -->
              <!-- /Modal -->
            </div>
            <!-- / Content -->

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                
                </div>
                <div>

                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
    </div>
    <!-- / Layout wrapper -->

<!-- 
ContactPersonID
Model_Branch
customer_supplier
Model_organization
Model_designation
Model_memberin
Model_CURRENT_STATUS
 -->
    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
    <script th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
    <script th:src="@{/assets/vendor/js/bootstrap.js}"></script>
    <script th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>

    <script th:src="@{/assets/vendor/libs/hammer/hammer.js}"></script>

    <script th:src="@{/assets/vendor/libs/i18n/i18n.js}"></script>
    <script th:src="@{/assets/vendor/libs/typeahead-js/typeahead.js}"></script>

    <script th:src="@{/assets/vendor/js/menu.js}"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables/jquery.dataTables.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-responsive/datatables.responsive.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons/datatables-buttons.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/jszip/jszip.js}"></script>
    <script th:src="@{/assets/vendor/libs/pdfmake/pdfmake.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons/buttons.html5.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons/buttons.print.js}"></script>
    <script th:src="@{/assets/vendor/libs/sweetalert2/sweetalert2.js}"></script>
    <script th:src="@{/assets/vendor/libs/cleavejs/cleave.js}"></script>
    <script th:src="@{/assets/vendor/libs/cleavejs/cleave-phone.js}"></script>
    <script th:src="@{/assets/vendor/libs/select2/select2.js}"></script>
	<!-- Form Validation -->
    <script th:src="@{/assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js}"></script>
    <script th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js}"></script>
    <script th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js}"></script>
     
    <!-- Main JS -->
    <script th:src="@{/assets/js/main.js}"></script>
    
	<!-- Flat Picker -->
    <script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
    <script th:src="@{/assets/vendor/libs/flatpickr/flatpickr.js}"></script>
     <script th:src="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
    <script th:src="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js}"></script>
    <script th:src="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.js}"></script>
    <script th:src="@{/assets/vendor/libs/pickr/pickr.js}"></script>
    <script th:src="@{/assets/vendor/libs/tagify/tagify.js}"></script>
    <!-- Page JS -->
    <!-- <script th:src="@{/assets/js/modal-edit-user.js}"></script> -->
    <script th:src="@{/assets/js/app-user-view.js}"></script>
    <script th:src="@{/assets/js/app-user-view-account.js}"></script>
    
     
    
	<script>
    $(document).ready(function() {  
    	//--------------------------------------------------------------------------------------------------------------------------------------
    	 
		//--------------------------------------------------------------------------------------------------------------------------------------		 		

		$(function() {
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			$(document).ajaxSend(function(e, xhr, options) {
				xhr.setRequestHeader(header, token);
			});
		});
		//--------------------------------------------------------------------------------------------------------------------------------------		 
	

		 $('#editContactPersondetailsForm').on('submit', function(event){
		    	    if(event.target.checkValidity()){
		
		    	    	$('.editcontactPersondatasubmit').prop("disabled",true);
		    	    	$('.editcontactPersondatasubmit').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
		    	    	var ContactPersonID=$("#ContactPersonID").val();
		    	    	var Model_branchid =$('#Model_branchid').val();
		  	        	var customer_supplier =$("input[name=customer_supplier]:checked").val();
		  	        	var Model_peoplename =$('#Model_peoplename').val();
		  	        	var Model_organization =$('#Model_organization').val();
		  	        	var Model_designation =$('#Model_designation').val();
		  	        	var Model_memberin =$('#Model_memberin').val();
		  	        	var Model_Relationmanger =$('#Model_Relationmanger').val();
		  	        	
		  	        	
		  	        	 var formData = {
		  	        			ContactPersonID: ContactPersonID,
		  	        			Model_branchid : Model_branchid,
		  	        			customer_supplier : customer_supplier,
		  	        			peoplename : Model_peoplename,
		  	        			organization : Model_organization,
		  	        			designation : Model_designation,
		  	        			memberin : Model_memberin,
		  	        			Relationmanger: Model_Relationmanger
		  	        			
		  				 }
		  				 $.ajax({
		  						type : "POST",url : "contactPersonupdatejson",
		  						data : formData, success : function(result) {
		  							var bmobj = JSON.parse(JSON.stringify(result));
		  							//console.log(bmobj);
		  							
		  							$('#Lbl_Branch').text(bmobj.branchName);
		  							$('#Lbl_customer_supplier').text(bmobj.customer_supplier);
		  							$('#Lbl_peoplename').text(bmobj.peoplename);
		  							$('#Lbl_organization').text(bmobj.organizationname);
		  							$('#Lbl_designation').text(bmobj.designation);
		  							$('#Lbl_memberin').text(bmobj.memberin);
		  							$('#Lbl_followername').text(bmobj.followername);
		  							

		  							validationformreset();
			  								
		  						},
		  						error : function(e) {
		  							console.log("Error" + e);
		  						}
		  					});
		  	        }	
		    	    else
		        	{
		    	    	$('.editcontactPersondatasubmit').prop("disabled",false);
		        	}

	   		 
		    	
		      });
		// --------------------------------------------------------------------
	      $('#addNewAddressForm').on('submit', function(event){

		    	  $('.editcontactPersonAddressdatasubmit').prop("disabled",true);
		    	  
		    	    if(event.target.checkValidity()){
		    	    	$('.editcontactPersonAddressdatasubmit').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
		    	    	var ContactPersonID=$("#ContactPersonID").val();
		    	    	var modalAddressCountry =$('#modalAddressCountry').val();
		    	    	var modalAddressAddress1 =$('#modalAddressAddress1').val();
		    	    	var modalAddressAddress2 =$('#modalAddressAddress2').val();
		    	    	var modalAddressLandmark =$('#modalAddressLandmark').val();
		    	    	var modalAddressVillage =$('#modalAddressVillage').val();
		    	    	var modalAddressCity =$('#modalAddressCity').val();
		    	    	var modalAddressState =$('#modalAddressState').val();
		    	    	var modalAddressZipCode =$('#modalAddressZipCode').val();
		    	    	var formData = {
		  	        			 ContactPersonID: ContactPersonID,
		  	        			AddressCountry : modalAddressCountry,
		  	        			AddressAddress1 : modalAddressAddress1,
		  	        			AddressAddress2 : modalAddressAddress2,
		  	        			AddressLandmark : modalAddressLandmark,
		  	        			AddressVillage : modalAddressVillage,
		  	        			AddressCity : modalAddressCity,
		  	        			AddressState : modalAddressState,
		  	        			AddressZipCode : modalAddressZipCode,
		  	        			functiontype : 'ContactPerson'
		  				 }
		  				 $.ajax({
		  						type : "POST",url : "Addressupdatejson",
		  						data : formData, success : function(result) {
		  							var bmobj = JSON.parse(JSON.stringify(result));
		  							//console.log(bmobj);
		  							$('#Lbl_AddressCountry').text(bmobj.addressCountry);
		  							$('#Lbl_AddressAddress1').text(bmobj.addressStreet1);
		  							$('#Lbl_AddressAddress2').text(bmobj.addressStreet2);
		  							$('#Lbl_AddressLandmark').text(bmobj.addressLankmark);
		  							$('#Lbl_AddressVillage').text(bmobj.addressVillage);
		  							$('#Lbl_AddressCity').text(bmobj.addressCity);
		  							$('#Lbl_AddressState').text(bmobj.addressState);
		  							$('#Lbl_AddressZipCode').text(bmobj.addressZIP);
									validationformaddressreset();
		  						},
		  						error : function(e) {
		  							console.log("Error" + e);
		  						}
		  					});
		  	        }	
		    	    else
		        	{
		    	    	$('.editcontactPersonAddressdatasubmit').prop("disabled",false);
		        	}
		      });

		
	  		// --------------------------------------------------------------------
		   		function validationformreset()
			   {
		   				$('.editcontactPersondataclose').click();
		   				$('.editcontactPersondatasubmit').prop("disabled",false);
			   			$('.editcontactPersondatasubmit').html("Submit");
			   }
		   		function validationformaddressreset()
			   {
		   				$('.editcontactPersonAddressdataclose').click();
		   				$('.editcontactPersonAddressdatasubmit').prop("disabled",false);
			   			$('.editcontactPersonAddressdatasubmit').html("Submit");
			   }
		   		function validationformContactreset()
				   {
			   				$('.contactclosebtn').click();
			   				$('.contactsavebtn').prop("disabled",false);
				   			$('.contactsavebtn').html("Submit");
				   			$('#modalcontactid').val("-");
				   }
		   		
		   		function validationformfilereset()
				   {
			   				$('.documentclose').click();
			   				$('.documentsave').prop("disabled",false);
				   			$('.documentsave').html("Submit");
				   }
		   		function validationformbankaccreset()
		   		{
		   			$('.BankDetailsclose').click();
	   				$('.BankDetailssave').prop("disabled",false);
		   			$('.BankDetailssave').html("Submit");
		   		}
		   	// --------------------------------------------------------------------
			   	 
	  			  $(".addcontactbtn").click(function(){
	  				$('#modalcontactid').val("-");
	  			  });
	  			  
	  			// --------------------------------------------------------------------
	  			
	  			   	$('#addContactform').on('submit', function(event){
	  			   	
	  			   		formData={
							contactPersonid : $("#ContactPersonID").val(),
							src : "ContactPerson",
							modalcontactid : $('#modalcontactid').val()								
					}
	  			  $.ajax({
					type : "GET",url : "checkPrimaryContactisPresant",
					data :formData ,success : function(result) {
							if(result == true && $("#modalcontactprimary").is(':checked'))
								{
									Swal.fire({
								        title: '',
								        text: "Primary Contact it already exists",
								        confirmButtonText: 'Ok',
								        customClass: {
								          confirmButton: 'btn btn-primary'
								        },
								        buttonsStyling: false
								      });
									document.getElementById("radioHead-Office").checked=false;
									
								}else
								{
	  			   	
						  			   		$('.contactsavebtn').prop("disabled",true);
								    	  
								    	    if(event.target.checkValidity()){
								    	    	$('.contactsavebtn').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
								    	    	var ContactPersonID=$("#ContactPersonID").val();
								    	    	var modalcontactid =$('#modalcontactid').val();
								    	    	var modalcontacttype =$('#modalcontacttype').val();
								    	    	var modalcontactPhone =$('#modalcontactPhone').val();
								    	    	var modalContactemail =$('#modalContactemail').val();
								    	    	var primarycontact =$("#modalcontactprimary").is(':checked');
								    	  
								    	    	
								    	    	var formData = {
								  	        			 ContactPersonID: ContactPersonID,
								  	        			 contactid: modalcontactid,
								  	        			 contacttype : modalcontacttype,
								  	        			 contactPhone : modalcontactPhone,
								  	        			 contactemail : modalContactemail,
								  	        			 primarycontact: primarycontact,
								  	        			functiontype : 'ContactPerson'
								  				 }
								  				 $.ajax({
								  						type : "POST",url : "Contactupdatejson",
								  						data : formData, success : function(result) {
								  							var bmobj = JSON.parse(JSON.stringify(result));
								  							
								  							if(modalcontactid == '-')
							  								{
								  								let tempresultid=bmobj;
								  								let parameters= tempresultid +",'"+ modalcontacttype +"','"+ modalcontactPhone +"','"+ modalContactemail +"','"+ primarycontact +"'";
									  							let tempresult ='<div class="cardMaster border p-3 rounded mb-3 card'+ tempresultid +'"><div class="d-flex justify-content-between flex-sm-row flex-column"><div class="card-information">';
									  							tempresult += '<input type="hidden" class="primarycontact'+ tempresultid +'" value="'+ primarycontact +'"/><h6 class="mb-3 contacteditbtn contacttype'+  tempresultid +'"  name="'+ tempresultid +'" onClick="reply_click('+ parameters +')">'+ modalcontacttype +'</h6>';
									  							tempresult += '<h6 class="mb-1 phonenumber'+  tempresultid +'">'+ modalcontactPhone +'</h6><span class="card-number email'+ tempresultid +'">'+ modalContactemail +'</span>';
									  							
									  							tempresult += '<span class="primarycontactlablecontainer'+  tempresultid +'">';
									  							if(primarycontact)
								  								{
									  								tempresult += '<span class="primarycontacttxt'+  tempresultid +'"><span class="badge bg-label-primary ">Primary</span></span>';
								  								}
									  							tempresult += '</span>'; 
									  							tempresult += '</div><div class="d-flex flex-column text-start text-lg-end"><div class="d-flex order-sm-0 order-1 mt-3">';
									  						//	tempresult += '<button class="btn btn-label-primary me-3 " name="'+ tempresultid +'" onClick="reply_click('+ parameters +')"><i class="bx bxs-edit-alt"></i></button><br/>';
									  							tempresult += '<button class="btn btn-label-secondary"  id="'+ tempresultid +'" name="'+ tempresultid +'"  onClick="contactdeleteoperation('+ tempresultid +')"  ><i class="bx bxs-trash-alt"></i></button></div></div></div></div>';
									  						
									  							$('#contactaddidv').before(tempresult);
									  						    
							  								}
								  							else
							  								{
								  								
								  								if(primarycontact)
								  								{
								  									$('.primarycontactlablecontainer'+modalcontactid).html("<span class='badge bg-label-primary'>Primary</span>");
								  									
								  								}else
							  									{
								  									$('.primarycontactlablecontainer'+modalcontactid).html("");
								  										 
							  									}
								  								$('.contacttype'+modalcontactid).text(modalcontacttype);
								  								$('.phonenumber'+modalcontactid).text(modalcontactPhone);
								  								$('.email'+modalcontactid).text(modalContactemail);
								  								$('.primarycontact'+modalcontactid).val(primarycontact);
								  								
							  								}
									  							validationformContactreset();
								  						},
								  						error : function(e) {
								  							console.log("Error" + e);
								  						}
								  					});
								  	        }	
								    	    else
								        	{
								    	    	$('.contactsavebtn').prop("disabled",false);
								        	}
										}
								 }
						 });
	  			   	});	
	  			// --------------------------------------------------------------------
	  			  $('.contacteditbtn').on('click', function(event){
	  				$('.contactsavebtn').prop("disabled",false);
		   			$('.contactsavebtn').html("Submit");
		   			
	  				let id=$(this).attr("name");
	  				$('#modalcontactid').val(id);
					$('#modalcontacttype').val($('.contacttype'+id).text());
					$('#modalcontactPhone').val($('.phonenumber'+id).text());
					$('#modalContactemail').val($('.email'+id).text());
					if($('.primarycontact'+id).val()=='true')
					{
						$('#modalcontactprimary').prop("checked",true);	
					}else
					{
						$('#modalcontactprimary').prop("checked",false);
					}
					 
					$('#addNewContact').modal('show');
	  			  });
	  			// --------------------------------------------------------------------
	  			// --------------------------------------------------------------------
  			// File uploading 		  
  					 const addNewdocumentForm =document.getElementById("addNewdocument");
  					 const modalFile =document.getElementById("modalFile");
  					 addNewdocumentForm.addEventListener("submit", e =>{
  						 
  						 if($('#modalDocNo').val() == '' && modalFile.files[0] == null)
  				    	 {
  					    	  Swal.fire({
  							        title: '',
  							        text: 'Either Document No (or) Upload file is mandatory!',
  							        confirmButtonText: 'Ok',
  							        customClass: {
  							          confirmButton: 'btn btn-primary'
  							        },
  							        buttonsStyling: false
  							      });
  				   		 }else
  				   		 {	 
		  						$('.documentsave').prop("disabled",true);
		  						$('.documentsave').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
		  						const endpoint ="fileuploadjson";
		  						const formdata= new FormData();
		  						//console.log(modalFile.files);
		  						
		  						formdata.append("File_Attach",modalFile.files[0]);
		  						formdata.append("ContactPersonID",$('#ContactPersonID').val());
		  						formdata.append("Documenttype",$('#modalDocumenttype').val());
		  						formdata.append("DocNo",$('#modalDocNo').val());
		  						formdata.append("functiontype","ContactPerson");
		  						
		  						  $.ajax({
		  			   					type : "POST",url : endpoint,
		  			   					data : formdata,
		  			   					contentType: false,
		  			   	              processData: false,
		  			   					success : function(result) {
		  			   						
		  			   					tempobj =JSON.parse(JSON.stringify(result));
		  			   						
		  			   					console.log(tempobj);
		  								
			  							let tempresult = '<div class="cardMaster border p-3 rounded mb-3 filecard'+ tempobj.filesid  +'"><div class="d-flex justify-content-between flex-sm-row flex-column"><div class="card-information">';		                              
			  							tempresult += '<h6 class="mb-1">'+ tempobj.documentType +'</h6>';
			  							tempresult += '<span class="card-number">'+ tempobj.documentNo +'</span>';
			  							if(tempobj.filePath != '')
			  							{
			  								tempresult += '<br/><a href="'+ tempobj.filePath +'" target="_blank">';
			  								if(tempobj.filePath.split(".")[1] == 'pdf')
		  									{
			  									tempresult += '<img src="assets/img/icons/misc/pdf.png" alt="PDF image" width="20" class="me-2">';
		  									}else
		 									{
		  										tempresult += '<img src="assets/img/icons/misc/jpg.png" alt="jp image" width="20" class="me-2">';
		 									}
			  								tempresult += '<span class="text-body"> ' + tempobj.filePath.split("/")[1].substring(15) + '</span>';
			  								tempresult += '</a>';
			  							}
			  							tempresult += '</div><div class="d-flex flex-column text-start text-lg-end"><div class="d-flex order-sm-0 order-1 mt-3">';
			  							
			  							tempresult += '<button class="btn btn-label-secondary filedeletebtn" name="'+ tempobj.filesid +'"   onClick="filedeleteoperation('+ tempobj.filesid +')"><i class="bx bxs-trash-alt"></i></button></div></div></div></div>';
			  								
			  							$('#fileaddidv').before(tempresult);
			  							
		  			   					validationformfilereset();
		  			   					},
		  			   					error : function(e) {
		  			   						console.log("Error" + e);
		  			   					}
		  			   				});
  				   		 }
  					 });
  				// --------------------------------------------------------------------
  				
  				$(".additem").click(function() {
					var name = $(this).attr('name');
					var labeltext = "";
					if (name == "addmodalcontacttype") {
						labeltext = "New Contact Type";
					}else if(name == "addmodaldocumenttype")
					{
						labeltext = "New Document Type";
					}else if(name == "addModel_memberin")
					{
						labeltext = "New Member In";
					}
					
					$('#additemalltxt').text(labeltext);
					$('#ItemStatusScrollable').modal('toggle');

				});

				$("#additemallsavebtn").click(
						function() {
					if ($("#additemall").val() != '') {
						var name = $('#additemalltxt').text();
						var labeltext = "";
						if (name == "New Contact Type") {
							labeltext = "modalcontacttype";
						}else if (name == "New Document Type") {
							labeltext = "modalDocumenttype";
						}else if (name == "New Member In") {
							labeltext = "addModel_memberin";
						}
						
						$('.' + labeltext).append(
								"<option value='"
										+ $("#additemall").val()
										+ "'>"
										+ $("#additemall").val()
										+ "</option>");
						//$('.' + labeltext).val($("#additemall").val());
						$("#additemall").val('');
						$('#ItemStatusScrollable').modal(
								'toggle');
					}
				});
  				
  				// --------------------------------------------------------------------
  				
  			   	$('#addNewBankDetails').on('submit', function(event){
  			   	 
  			   		
	  			   	if($('#model_acno').val() ==  $('#model_acno_confirm').val())
	  		    	 {
	  			    	  	$('.BankDetailssave').prop("disabled",true);
				    	  
				    	    if(event.target.checkValidity()){
				    	    	$('.BankDetailssave').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
				    	    	var ContactPersonID=$("#ContactPersonID").val();
				    	    	var model_acid =$('#model_Accnoid').val();
				    	    	var model_acno =$('#model_acno').val();
				    	    	var model_acname =$('#model_acname').val();
				    	    	var model_bankname =$('#model_bankname').val();
				    	    	var model_BranchName =$('#model_BranchName').val();
				    	    	var model_ifsccode =$('#model_ifsccode').val();
				    	    	var formData = {
				  	        			ContactPersonID: ContactPersonID,
				  	        			acid: model_acid,
				  	        			acno: model_acno,
				  	        			acname : model_acname,
				  	        			bankname : model_bankname,
				  	        			branchname : model_BranchName,
				  	        			ifsccode : model_ifsccode,
				  	        			functiontype : 'ContactPerson'
				  				 }
				    	    	
				  				 $.ajax({
				  						type : "POST",url : "Bankaccupdatejson",
				  						data : formData, success : function(result) {
				  							var bmobj = JSON.parse(JSON.stringify(result));
				  							console.log(bmobj);
				  							$('#Lbl_acno').text(model_acno);
				  							$('#Lbl_acname').text(model_acname);
				  							$('#Lbl_bankname').text(model_bankname);
				  							$('#Lbl_branchname').text(model_BranchName);
				  							$('#Lbl_ifsccode').text(model_ifsccode); 
				  							validationformbankaccreset();
				  						},
				  						error : function(e) {
				  							console.log("Error" + e);
				  						}
				  					});
		  	        }	
		    	    else
		        	{
		    	    	$('.BankDetailssave').prop("disabled",false);
		        	}
  		   		 }else{
  		   			 Swal.fire({
				        title: '',
					        text: 'Account number is not match!',
					        confirmButtonText: 'Ok',
					        customClass: {
					          confirmButton: 'btn btn-primary'
					        },
					        buttonsStyling: false
					      });
		   		 }
		   		 
  			   	});	
  			// --------------------------------------------------------------------
  			$('.collapsetogglebtn').click(function(){
  				 $('#collapsetoggleicon').toggleClass('bx-chevron-down bx-chevron-up'); 
  			});
  			// --------------------------------------------------------------------
  			  
	  			
		   	//-------------------------------------------
		    }); // Jquery
    
		    function reply_click(id,contacttype,phonenumber,email,primarycontact)
			{
				$('#modalcontactid').val(id);
				$('#modalcontacttype').val(contacttype);
				$('#modalcontactPhone').val(phonenumber);
				$('#modalContactemail').val(email);		
				if(primarycontact=='true')
				{
					$('#modalcontactprimary').prop("checked",true);	
				}else
				{
					$('#modalcontactprimary').prop("checked",false);
				}
				$('#addNewContact').modal('show');
			}
				 
		 
		    function contactdeleteoperation(id){
		    	 Swal.fire({
		             title: 'Are you sure?',
		             text: "You won't be able to revert this!",
		             icon: 'warning',
		             showCancelButton: true,
		             confirmButtonText: 'Yes, delete it!',
		             customClass: {
		               confirmButton: 'btn btn-primary me-3',
		               cancelButton: 'btn btn-label-secondary'
		             },
		             buttonsStyling: false
		           }).then(function (result) {
		             if (result.value) {
		              var formData = {
		           	 contactid: id,
		           	functiontype : 'ContactPerson'
		           	 }
		   			 $.ajax({
		   					type : "POST",url : "Contactdeletejson",
		   					data : formData, success : function(result) {
		   						$('.card'+id).remove();
		   						Swal.fire({
		   				              icon: 'success',
		   				              title: 'Deleted!',
		   				              text: 'Contact has been deleted.',
		   				              customClass: {
		   				                confirmButton: 'btn btn-success'
		   				              }
		   				            });
		   					},
		   					error : function(e) {
		   						console.log("Error" + e);
		   					}
		   				});
		               
		               }
		           });
		    }
		  
		  //------------------------------------------------------    
		   function filedeleteoperation(id){
		    	 Swal.fire({
		             title: 'Are you sure?',
		             text: "You won't be able to revert this!",
		             icon: 'warning',
		             showCancelButton: true,
		             confirmButtonText: 'Yes, delete it!',
		             customClass: {
		               confirmButton: 'btn btn-primary me-3',
		               cancelButton: 'btn btn-label-secondary'
		             },
		             buttonsStyling: false
		           }).then(function (result) {
		             if (result.value) {
		              var formData = {
		            		  fileid: id,
		            		  functiontype : 'ContactPerson'
		           	 }
		   			 $.ajax({
		   					type : "POST",url : "Filedeletejson",
		   					data : formData, success : function(result) {
		   						$('.filecard'+id).remove();
		   						Swal.fire({
		   				              icon: 'success',
		   				              title: 'Deleted!',
		   				              text: 'File has been deleted.',
		   				              customClass: {
		   				                confirmButton: 'btn btn-success'
		   				              }
		   				            });
		   					},
		   					error : function(e) {
		   						console.log("Error" + e);
		   					}
		   				});
		               
		               }
		           });
		    }
		  
		  //------------------------------------------------------    
		  
		  $('.contactdeletebtn').on('click', function(event){
		    	  let id=$(this).attr("name");
		    	  contactdeleteoperation(id);
		      });
		  	//------------------------------------------------------    
		  	  $('.filedeletebtn').on('click', function(event){
		    	  let id=$(this).attr("name");
		    	  filedeleteoperation(id);
		      });
		//------------------------------------------------------
	  /* // Date Format
	   const flatpickrFriendly = document.querySelector('#Model_designation');
		 // Human Friendly
		  if (flatpickrFriendly) {
		    flatpickrFriendly.flatpickr({
		      altInput: true,
		      altFormat: 'F j, Y',
		      dateFormat: 'Y-m-d'
		    });
		  } 
		 
		// Date Format
		   const flatpickrFriendly1 = document.querySelector('#Model_effectiveon');
			 // Human Friendly
			  if (flatpickrFriendly1) {
			    flatpickrFriendly1.flatpickr({
			      altInput: true,
			      altFormat: 'F j, Y',
			      dateFormat: 'Y-m-d'
			    });
			  }*/
		// Phone
			 const phoneMask = document.querySelector('.phone-number-otp-mask');

		    // Phone Number Input Mask
		    if (phoneMask) {
		      new Cleave(phoneMask, {
		        phone: true,
		        phoneRegionCode: 'US'
		      });
		    }    
	 // List
		  const TagifyCustomListSuggestionEl = document.querySelector('#Model_organization');
		  
		  $.ajax({
					type : "GET",url : "organizationNameList",
					data : '', success : function(result) {
						
						 // List
					    let TagifyCustomListSuggestion = new Tagify(TagifyCustomListSuggestionEl, {
					      whitelist: result,
					      maxTags: 1,
					      dropdown: {
					        maxItems: 20,
					        classname: '',
					        enabled: 0,
					        closeOnSelect: false
					      }
					    });
						 
					}
		  });
		   
		  //--------------------------	 
    </script>
		  </body>
		</html>
