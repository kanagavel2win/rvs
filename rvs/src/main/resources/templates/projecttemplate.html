<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="loading" lang="en"
	data-textdirection="ltr">

<!-- BEGIN: Head-->

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="ICC">
<title>Project Template</title>
<link rel="apple-touch-icon"
	th:href="@{/app-assets/images/ico/apple-icon-120.png}">
<link rel="shortcut icon" type="image/x-icon"
	th:href="@{/app-assets/images/ico/favicon.ico}">
<link
	href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600%7CIBM+Plex+Sans:300,400,500,600,700"
	rel="stylesheet}">
<!-- BEGIN: Vendor CSS-->
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/vendors/css/vendors.min.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/vendors/css/charts/apexcharts.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/vendors/css/extensions/dragula.min.css}">
<!-- END: Vendor CSS-->

<!-- BEGIN: Theme CSS-->
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/bootstrap.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/bootstrap-extended.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/colors.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/components.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/themes/dark-layout.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/themes/semi-dark-layout.css}">
<!-- END: Theme CSS-->

<!-- BEGIN: Page CSS-->
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/core/menu/menu-types/vertical-menu.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/pages/dashboard-analytics.css}">
	<link rel="stylesheet" type="text/css"
	th:href="@{/app-assets/css/plugins/forms/wizard.css}">
<!-- END: Page CSS-->

<!-- BEGIN: Custom CSS-->
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/css/style.css}">
<!-- END: Custom CSS-->
<style>
.delete,.deletetask{
cursor:pointer;
float:right;
}
.table1 td
{
border:1px solid #ccc;
padding:5px;
font-size:11px; 
}
.table1 th
{
border:1px solid #ccc;
padding:5px;
font-size:11px; 
font-weight:bold;
}
.addactivity
{

cursor:pointer;
font-size:11px;
color:#0000FF;
}
.actionitems
{
	font-size:15px;
}
.card-headerpd{
background:#EBEBEB;
}

.card-headerpdtask{
background:#EBEBEB;
}
.emptitle {
	color: #527a00;
	font-size: 15px;
	line-height: 20px;
	font-weight: 600;
	font-family: Fira Sans, Trebuchet MS, sans-serif;
	cursor: pointer;
}
.bxs-file-pdf
{
	color:#FF0000;
	font-size:50px;
}
.m2
{
	vertical-align:middle;
	line-height: 20px;
}
	
	.uppercase{
		text-transform:uppercase;
	}
	.capitalize{
		text-transform:capitalize;
	}
		
	.highlight-error {
  border-color: red;
}	
.error
{
	color:red;
	
}

</style>
<script th:inline="javascript">
var emgstat = 0;
var taskactivity = 0;</script>
</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body
	class="vertical-layout vertical-menu-modern boxicon-layout no-card-shadow 2-columns  navbar-sticky footer-static  "
	data-open="click" data-menu="vertical-menu-modern" data-col="2-columns">

	<!-- BEGIN: Header-->
	<div th:insert="header"></div>
	<!-- END: Header-->


	<!-- BEGIN: Main Menu-->
	<div th:insert="menu"></div>
	<!-- END: Main Menu-->

	<!-- BEGIN: Content-->
	<!-- BEGIN: Content-->
	<div class="app-content content">
		<div class="content-overlay"></div>
		<div class="content-wrapper">
			<div class="content-header row">
				<div class="content-header-left col-12 mb-2 mt-1">
					<div class="row breadcrumbs-top">
						<div class="col-12">
							<h5 class="content-header-title float-left pr-1 mb-0">
								Project Template</h5>
							
							<div class="breadcrumb-wrapper col-12">
								<ol class="breadcrumb p-0 mb-0">
									<li class="breadcrumb-item"><a href="index"><i
											class="bx bx-home-alt"></i></a></li>

								</ol>
								
							</div>
							
						</div>
					</div>
				</div>
			</div>
			<div class="content-body">

				<!-- Basic Vertical form layout section start -->
				<section id="basic-vertical-layouts">
					<div class="row match-height">
						<div class="col-12">
							<div class="card">
								<div class="card-content">
									<div class="card-body">
									<!--scrolling content Modal -->
										<div class="modal fade" id="ProjectActivityScrollable"
											tabindex="-1" role="dialog"
											aria-labelledby="ProjectActivityScrollableTitle"
											aria-hidden="true">
											<div class="modal-dialog modal-dialog-scrollable"
												role="document">
												<div class="modal-content">
													<div class="modal-header bg-warning">
														<h5 class="modal-title white"
															id="ProjectActivityScrollableTitle"> Activity </h5>
														<button type="button" class="close" data-dismiss="modal"
															aria-label="Close">
															<i class="bx bx-x"></i>
														</button>
													</div>
													<div class="modal-body">
														<div class="col-md-12">
															<div class="form-group">
																<label for="addmodel">Activity Type</label>
																<div class="position-relative">
																	<fieldset class="form-group">
																		<input type="hidden" id="addActivitytypearea" 
																			>
																		<select class="form-control" id="addActivitytype">
																			<option>Task</option>
																			<option>Meeting</option>
																		</select>
																	</fieldset>
																</div>
															</div>
														</div>
														<div class="col-md-12">
															<div class="form-group">
																<label for="addmodel">Activity Name</label>
																<div class="position-relative">
																	<fieldset class="form-group">
																		<input type="text" id="addActivityname" 
																			class="form-control capitalize">
																	</fieldset>
																</div>
															</div>
														</div>
														<div class="col-md-12">
															<div class="form-group">
																<label for="addmodel">Activity Order</label>
																<div class="position-relative">
																	<fieldset class="form-group">
																		<input type="number" id="addActivityorder" 
																			class="form-control capitalize">
																	</fieldset>
																</div>
															</div>
														</div>

													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-light-secondary"
															data-dismiss="modal">
															<i class="bx bx-x d-block d-sm-none"></i> <span
																class="d-none d-sm-block">Close</span>
														</button>
														<button type="button" class="btn btn-primary ml-1"
															id="addActivitysavebtn">
															<i class="bx bx-check d-block d-sm-none"></i> <span
																class="d-none d-sm-block">ADD</span>
														</button>
													</div>
												</div>
											</div>
										</div>
										<!--scrolling content Modal -->
									<!--scrolling content Modal -->
										<div class="modal fade" id="ProjectTaskScrollable"
											tabindex="-1" role="dialog"
											aria-labelledby="ProjectTaskScrollableTitle"
											aria-hidden="true">
											<div class="modal-dialog modal-dialog-scrollable"
												role="document">
												<div class="modal-content">
													<div class="modal-header bg-warning">
														<h5 class="modal-title white"
															id="ProjectTaskScrollableTitle"> Task </h5>
														<button type="button" class="close" data-dismiss="modal"
															aria-label="Close">
															<i class="bx bx-x"></i>
														</button>
													</div>
													<div class="modal-body">
														<div class="col-md-12">
															<div class="form-group">
																<label for="addmodel">Task Name</label>
																<div class="position-relative">
																	<fieldset class="form-group">
																		<input type="text" id="addtaskname" 
																			class="form-control capitalize">
																	</fieldset>
																</div>
															</div>
														</div>
														<div class="col-md-12">
															<div class="form-group">
																<label for="addmodel">Task Order</label>
																<div class="position-relative">
																	<fieldset class="form-group">
																		<input type="number" id="addtaskorder" 
																			class="form-control capitalize">
																	</fieldset>
																</div>
															</div>
														</div>

													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-light-secondary"
															data-dismiss="modal">
															<i class="bx bx-x d-block d-sm-none"></i> <span
																class="d-none d-sm-block">Close</span>
														</button>
														<button type="button" class="btn btn-primary ml-1"
															id="addtasksavebtn">
															<i class="bx bx-check d-block d-sm-none"></i> <span
																class="d-none d-sm-block">ADD</span>
														</button>
													</div>
												</div>
											</div>
										</div>
										<!--scrolling content Modal -->
									
									<form th:action="@{/projecttemplatesave}"
											th:object="${projecttemplateobject}" method="POST"
											class="wizard-horizontal" id="formId" enctype="multipart/form-data">
									
										
					           		 	
								            <div class="row">
													<div th:if="${param.success}" class="col-12">
													<button type="button" class="btn mb-1 btn-success btn-lg btn-block">Template Info
														 Updated Successfully</button>
													</div>
											
												<div class="col-md-12">
													<div class="form-group">
														<label class="emptitle">Template</label>
														
													</div>
													
												</div>
												<div class="col-md-6">
													<div class="form-group">
														<label for="first-name-icon">Name
															<span  class="error">*</span>
														</label>
														
														<div class="position-relative has-icon-left">
															<input type="hidden"
																th:value="${projecttemplateobject['id']}"
																th:field="*{id}"> 
																
															<input type="text" 
																id="Name"
																class="form-control capitalize" 
																placeholder="Template Name"
																th:value="${projecttemplateobject['Title']}"
																th:field="*{Title}" onkeypress="return onlyAlphabets(event,this);" required>
															<div class="form-control-position">
																<i class="bx bxs-report"></i>
															</div>
														</div>
													</div>
												</div>
												
												
												
												
												<div class="col-md-12">
													<div class="form-group">
														<hr/>
														<label class="emptitle">Task List</label>
														<button class="btn btn-light-primary btn-sm"
																		id="projecttasskdivadd" type="button"
																		title="Add Project Task">
																		<i class="bx bx-plus"></i>
																	</button>
													</div>
												</div>

												<!-- Collapse start -->
										                <section id="collapsible" class="col-md-12">
										                    
										                    <div class="collapsible">
										                       <th:block th:each="childobj, s : *{projectTemplateTaskMaster}">
											                        <div th:class="'card collapse-header masterdiv'+  ${s.index}">
											                            <div th:id="'headingCollapsepd' + ${s.index}" class="card-header card-headerpd" th:name="${childobj['projecttaskid']}" data-toggle="collapse" role="button" th:data-target="'#collapsepd' + ${s.index}" aria-expanded="false" th:aria-controls="'collapsepd' + ${s.index}">
											                                <span class="collapse-title" th:text="${childobj['tasktitle']} ">
											                                </span>
											                                <input type="hidden" th:field="*{projectTemplateTaskMaster[__${s.index}__].projecttaskid}"
																										th:value="${childobj['projecttaskid']}" />
																			<input type="hidden" th:field="*{projectTemplateTaskMaster[__${s.index}__].tasktitle}"
																										th:value="${childobj['tasktitle']}" />
																			<input type="hidden" th:field="*{projectTemplateTaskMaster[__${s.index}__].taskorder}"
																										th:value="${childobj['taskorder']}" />
																				
																			<span class="deletetask" th:name="${s.index}"><i class="bx bx-trash-alt"></i></span>						
											                            </div>
											                            <div th:id="'collapsepd' + ${s.index}" role="tabpanel" th:aria-labelledby="'headingCollapsepd' + ${s.index}" class="collapse">
											                                <div class="card-content">
											                                    <div class="card-body ">
											                                    	<div class="row">
																								
																									<table th:class="'table1 divholder'+ ${s.index}" > 
																										<tr> <th>Activity Type</th> 
																											 <th>Activity Name</th> 
																											 <th>Order</th>
																											 <th></th>  
																										</tr> 
																									<th:block th:each="childactvity, ac : *{projectTemplateTaskMaster[__${s.index}__].projectTemplateActivityMaster}">
																									
																										<tr><td><input type="hidden" th:field="*{projectTemplateTaskMaster[__${s.index}__].projectTemplateActivityMaster[__${ac.index}__].projectactivityid}" th:value="${childactvity['projectactivityid']}"/>
																										<input type="hidden" th:field="*{projectTemplateTaskMaster[__${s.index}__].projectTemplateActivityMaster[__${ac.index}__].activitytype}" th:value="${childactvity['activitytype']}" /><span th:text="${childactvity['activitytype']}"></span></td>
																										<td><input  type="hidden"th:field="*{projectTemplateTaskMaster[__${s.index}__].projectTemplateActivityMaster[__${ac.index}__].activitytitle}" th:value="${childactvity['activitytitle']}"/><span th:text="${childactvity['activitytitle']}"></span></td>
																										<td><input type="hidden" th:field="*{projectTemplateTaskMaster[__${s.index}__].projectTemplateActivityMaster[__${ac.index}__].activityorder}"  th:value="${childactvity['activityorder']}" /><span th:text="${childactvity['activityorder']}"></span></td>
																										<td> <span class="delete"><i class="bx bx-trash-alt"></i></span></td>
																										</tr>
																										<script>
																											taskactivity = taskactivity + 1;
																										</script>
																									</th:block>
																									
																									
																									</table>
																									
																									<br/><br/><span class="addactivity col-12" th:name="${s.index}">+ Add Activity</span>	
																																				                                    	
																					</div>
											                                    </div>
											                                </div>
											                            </div>
											                        </div>
											                        <script>
																		emgstat = emgstat + 1;
																	</script>
										                       </th:block>
										                       <span id="projectdivlast"></span>
										                       
										                    </div>
										                </section>
										                <!-- Collapse end -->
												
													
												
												<div class="col-12">
													<br/>
													<button type="submit" class="btn btn-primary mr-1 mb-1 abouttabclick"  style="float:right">Save</button>
													
												</div>
												
												
												
												
											</div>
											
                                   			
                                   			
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<!-- // Basic Vertical form layout section end -->


			</div>
		</div>
	</div>
	<!-- END: Content-->



	<div class="sidenav-overlay"></div>
	<div class="drag-target"></div>

	<!-- BEGIN: Footer-->
	<footer class="footer footer-static footer-light">
		<p class="clearfix mb-0">
			<span class="float-left d-inline-block"></span><span
				class="float-right d-sm-inline-block d-none"></span>
			<button class="btn btn-primary btn-icon scroll-top" type="button">
				<i class="bx bx-up-arrow-alt"></i>
			</button>
		</p>
	</footer>
	<!-- END: Footer-->

	
	<!-- BEGIN: Vendor JS-->
	<script th:src="@{/app-assets/vendors/js/vendors.min.js}"></script>
	<script
		th:src="@{/app-assets/fonts/LivIconsEvo/js/LivIconsEvo.tools.js}"></script>
	<script
		th:src="@{/app-assets/fonts/LivIconsEvo/js/LivIconsEvo.defaults.js}"></script>
	<script th:src="@{/app-assets/fonts/LivIconsEvo/js/LivIconsEvo.min.js}"></script>
	<!-- BEGIN Vendor JS-->

	<!-- BEGIN: Page Vendor JS-->
	<script th:src="@{/app-assets/vendors/js/charts/apexcharts.min.js}"></script>
	<script th:src="@{/app-assets/vendors/js/extensions/dragula.min.js}"></script>
	<script th:src="@{/app-assets/vendors/js/forms/validation/jquery.validate.min.js}"></script>
	<!-- END: Page Vendor JS-->

	<!-- BEGIN: Theme JS-->
	<script th:src="@{/app-assets/js/core/app-menu.js}"></script>
	<script th:src="@{/app-assets/js/core/app.js}"></script>
	<script th:src="@{/app-assets/js/scripts/components.js}"></script>
	<script th:src="@{/app-assets/js/scripts/footer.js}"></script>
	<!-- END: Theme JS-->

	<!-- BEGIN: Page JS-->
	<script th:src="@{/app-assets/js/scripts/pages/dashboard-analytics.js}"></script>
	<script th:src="@{/app-assets/js/scripts/forms/wizard-steps.js}"></script>
	<!-- END: Page JS-->
	<!-- Custom Java script validations -->
	<script th:src="@{/js/customvalidation.js}"></script>

	<script>
		$(document).ready(
				function() {
					//----------------------------------------
					$(document).on("click", "#projecttasskdivadd", function() {
						
						$('#ProjectTaskScrollable').modal('toggle');

					});
					
					//----------------------------------------
					$(document).on("click", "#addtasksavebtn", function() {
					
						var addtaskname = $('#addtaskname').val();
						var addtaskorder = $('#addtaskorder').val();
						if(addtaskname == "" || addtaskorder=="")
						{
							alert("Please fill the Task Name and Order no");
						}
						else
						{
							$("#projectdivlast")
							.before('<div class="card collapse-header masterdiv' + emgstat +'"> <div id="headingCollapsepd' + emgstat +'" class="card-header card-headerpd"  data-toggle="collapse" role="button" data-target="#collapsepd' + emgstat +'" aria-expanded="false" aria-controls="collapsepd' + emgstat +'"> 	<span class="collapse-title">'+ addtaskname +' 	</span> 	<input type="hidden" name="projectTemplateTaskMaster[' + emgstat +'].projecttaskid" value="0" /> 	<input type="hidden" name="projectTemplateTaskMaster[' + emgstat +'].tasktitle" 								value="'+ addtaskname +'" /> 	<input type="hidden" name="projectTemplateTaskMaster[' + emgstat +'].taskorder" 								value="'+ addtaskorder +'" /> 				<span class="deletetask" name="' + emgstat +'"><i class="bx bx-trash-alt"></i></span>				 </div> <div id="collapsepd' + emgstat +'" role="tabpanel" aria-labelledby="headingCollapsepd' + emgstat +'" class="collapse"> 	<div class="card-content"> 		<div class="card-body "> 			<div class="row"> 	<table class="table1 divholder' + emgstat +'" > <tr> <th>Activity Type</th> <th>Activity Name</th> <th>Order</th> </tr> </table><br/><br/><span class="addactivity col-12" name="' + emgstat +'">+ Add Activity</span>	</div> 		</div> 	</div> </div> </div>');
							
							emgstat = emgstat + 1;
							$('#ProjectTaskScrollable').modal('toggle');
							$('#addtaskname').val("");
							$('#addtaskorder').val("");
						}
						

					});
					
					//----------------------------------------
					$(document).on("click", ".addactivity", function() {
						name= $(this).attr("name");
						$("#addActivitytypearea").val(name);
						$('#ProjectActivityScrollable').modal('toggle');

					});
					//----------------------------------------
					$(document).on("click", "#addActivitysavebtn", function() {
					
						var addActivitytype = $('#addActivitytype').val();
						var addActivityorder = $('#addActivityorder').val();
						var addActivityname = $('#addActivityname').val();
						var addActivitytypearea = $('#addActivitytypearea').val();
						if(addActivityname == "" || addActivityorder=="")
						{
							alert("Please fill the Activity Name and Order no");
						}
						else
						{
							
							let temphtml='<tr><td><input type="hidden" name="projectTemplateTaskMaster[' + addActivitytypearea +'].projectTemplateActivityMaster['+ taskactivity +'].projectactivityid" value="0"/>';
							 temphtml +='<input type="hidden" name="projectTemplateTaskMaster[' + addActivitytypearea +'].projectTemplateActivityMaster['+ taskactivity +'].activitytype"  value="'+ addActivitytype+'"/>'+ addActivitytype+'</td>';
							 temphtml +='<td><input type="hidden" name="projectTemplateTaskMaster[' + addActivitytypearea +'].projectTemplateActivityMaster['+ taskactivity +'].activitytitle"  value="'+ addActivityname+'"/>'+ addActivityname+'</td>';
							 temphtml +='<td><input type="hidden" name="projectTemplateTaskMaster[' + addActivitytypearea +'].projectTemplateActivityMaster['+ taskactivity +'].activityorder"  value="'+ addActivityorder+'"/>'+ addActivityorder+'</td><td> <span class="delete"><i class="bx bx-trash-alt"></i></span></td></tr>';
							$(".divholder"+addActivitytypearea)
							.append(temphtml);
							
							taskactivity = taskactivity + 1;
							$('#ProjectActivityScrollable').modal('toggle');
							$('#addActivityorder').val("");
							$('#addActivityname').val("");
						}
						

					});
					//----------------------------------------
					$(document).on("click", ".delete", function() {
					
						if(confirm("Are you sure to remove this item from list?"))
							{
								$(this).closest("tr").remove();
							}
					});
					//----------------------------------------
					//----------------------------------------
					$(document).on("click", ".deletetask", function() {
						name= $(this).attr("name");
						
						if(confirm("Are you sure to remove this item from list?"))
							{
								$(".masterdiv"+ name).html("");
							}
					});
					//----------------------------------------
					
					
				});			
		
	</script>

</body>
<!-- END: Body-->

</html>




 