<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en"
	class="light-style layout-navbar-fixed layout-menu-fixed" dir="ltr"
	data-theme="theme-default" th:data-assets-path="@{/assets/}"
	data-template="vertical-menu-template">
<head>
<meta name="_csrf" th:content="${_csrf.token}" />
<!-- default header name is X-CSRF-TOKEN -->
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

<title>Attendance</title>

<meta name="description" content="" />



<!-- Favicon -->
<link rel="icon" type="image/x-icon"
	th:href="@{/assets/img/favicon/favicon.ico}" />

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
	rel="stylesheet" />

<!-- Icons -->
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/boxicons.css}" />
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/fontawesome.css}" />
<link rel="stylesheet" th:href="@{/assets/vendor/fonts/flag-icons.css}" />

<!-- Core CSS -->
<link rel="stylesheet" th:href="@{/assets/vendor/css/rtl/core.css}"
	class="template-customizer-core-css" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/css/rtl/theme-default.css}"
	class="template-customizer-theme-css" />
<link rel="stylesheet" th:href="@{/assets/css/demo.css}" />

<!-- Vendors CSS -->
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/animate-css/animate.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/sweetalert2/sweetalert2.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/flatpickr/flatpickr.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/select2/select2.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendor/libs/formvalidation/dist/css/formValidation.min.css}" />

<!-- Page CSS -->

<link rel="stylesheet"
	th:href="@{/assets/vendor/css/pages/page-user-view.css}" />
<!-- Helpers -->
<script th:src="@{/assets/vendor/js/helpers.js}"></script>

<!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
<!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
<script th:src="@{/assets/vendor/js/template-customizer.js}"></script>
<!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
<script th:src="@{/assets/js/config.js}"></script>

<style>
#tabledate {
	height: 350px;
	font-family: Verdana, Geneva, sans-serif;
	font-size: 14px;
	border: 1px #ccc solid;
}

.selectdate {
	border: 1px #ccc solid;
	vertical-align: top;
	text-align: right;
	cursor: pointer;
}

.ttd {
	border: 1px #ccc solid;
	vertical-align: top;
	text-align: right;
	
	text-align: center;
	vertical-align: middle;
	width: 80px;
	height: 40px;
}

.td {
	border: 1px #ccc solid;
	vertical-align: top;
	text-align: right;
	cursor: pointer;
}

.caltoptxt {
	font-size: 16px;
	text-align: center;
	vertical-align: middle;
	font-weight: bold;
}

.caltoptxtcontainer i {
	font-size: 38px;
	
	cursor: pointer;
}

.calender {
	float: left;
}

.attendancelisttable td:nth-child(1) i {
	font-size: 20px;
}

.btnmasternote {
	border: 0px #ccc solid;

	cursor: pointer;
}

.btnmasternote i {
	padding: 2px;
	padding-right: 10px;
	padding-left: 10px;
	border: 0px #ccc solid;
	font-size: 28px;

}

.attendancelisttable {
	line-height: 45px;
}

.attendancelisttable td:nth-child(2) {
	padding-left: 10px;
	font-size: 13px;
}

.attendancelisttable td:nth-child(3) button {
	padding: 2px;
	padding-right: 10px;
	padding-left: 10px;
	font-size: 13px;
	border: 1px #ccc solid;
}

.attendancelisttable td:nth-child(4) button {
	padding: 2px;
	padding-right: 10px;
	padding-left: 10px;
	font-size: 13px;
	border: 1px #ccc solid;
}

.attendancelisttable td:nth-child(5) button {
	padding: 2px;
	padding-right: 10px;
	padding-left: 10px;
	font-size: 13px;
	border: 1px #ccc solid;
}

.attendancelisttable td:nth-child(6) button {
	padding: 2px;
	padding-right: 10px;
	padding-left: 10px;
	font-size: 13px;
	border: 1px #ccc solid;
}

.btn, .btn-outline-info, .btn-outline-danger, .btn-outline-warning {
	border: 0px #B5B5B5 solid;
	color: #B5B5B5;
}

.cal_inner_holder {
	width: 60px;
	font-size: 11px;
	margin-top: 35px;
}

.cal_inner_holder_right {
	float: right;
	font-size: 12px;
	min-width: 25px;
	height: 23px;
	padding-top: 4px;
	text-align: center;
}

.td:hover {
	background-color: #D4D4D4;
}

.td:hover>.cal_inner_holder_right {
	background-color: #6B6B6B;
	border-radius: 50%;
	color: #FFFFFF;
	transition: background-color 0.2s;
}

.cal_inner_holder_right_today {
	float: right;
	font-size: 12px;
	min-width: 25px;
	height: 23px;
	padding-top: 4px;
	text-align: center;
	border-radius: 50%;
	color: #FFFFFF;
	transition: background-color 0.2s;
	background-color: #ff3b30;
}

.cal_inner {
	float: left;
	border-radius: 3px;
	width: 20px;
	text-align: center;
	background: #CCC;
	padding: 2px;
	margin: 1px;
}

.today {
	float: right;
	padding: 5px;
	border: none;
	color: #ccc;
}

.bx-trash {
	cursor: pointer;
}
</style>

</head>

<body>
	<!-- Layout wrapper -->
	<div class="layout-wrapper layout-content-navbar">
		<div class="layout-container">
			<!-- Menu -->
			<div th:insert="menu"></div>
			<!-- / Menu -->

			<!-- Layout container -->
			<div class="layout-page">
				<!-- Navbar -->
				<div th:insert="header"></div>
				<!-- / Navbar -->

				<!-- Content wrapper -->
				<div class="content-wrapper">
					<!-- Content -->

					<div class="container-xxl flex-grow-1 container-p-y">
						<h4 class="py-3 breadcrumb-wrapper mb-4">
							<span class="text-muted fw-light">Administration/HR
								Management/<a href="empattendance">Attendance</a>
							</span>
						</h4>
						<div class="row gy-4">
							<!-- User Sidebar -->
							<div class="col-xl-6 col-lg-5 col-md-5 order-1 order-md-0">
								<!-- User Card -->
								<div class="card mb-4">
									<div class="card-body">
										<!-- ---------------------- -- ---------------------- -->
										<!-- ---------------------- -- ---------------------- -->
										<div class="table-responsive">
											<div class="calender">
												<span class="caltoptxtcontainer"> <a
													th:href="@{empattendance?date={d}(d=${preDate})}"> <span
														class="caltoptxt"><i class="bx bx-chevron-left"></i></span>
												</a> <span class="caltoptxt" th:text="${currentmonname}"></span>
													<span class="caltoptxt" th:text="${currentyear}"></span> <a
													th:href="@{empattendance?date={d}(d=${nxtDate})}"> <span
														class="caltoptxt"><i class="bx bx-chevron-right"></i></span>
												</a>
												</span> <a
													th:href="@{empattendance?date={d}(d=${tempcurrentdate})}"
													class="btn-outline-primary today">Today</a>
												<table id='tabledate' class="">
													<tr>
														<th class='ttd'>Sun</th>
														<th class='ttd'>Mon</th>
														<th class='ttd'>Tue</th>
														<th class='ttd'>Wed</th>
														<th class='ttd'>Thu</th>
														<th class='ttd'>Fri</th>
														<th class='ttd'>Sat</th>
													</tr>

													[(${calhtml})]
												</table>
											</div>

										</div>
										<!-- ---------------------- -- ---------------------- -->
										<!-- ---------------------- -- ---------------------- -->
									</div>
								</div>
								<!-- /User Card -->


							</div>
							<!--/ User Sidebar -->

							<!-- User Content -->
							<div class="col-xl-6 col-lg-7 col-md-7 order-0 order-md-1">
								<div class="card mb-4">
									<div class="card-body">
										<div class="row">
											<div class="form-group col-md-6">
												<div class="position-relative has-icon-left">
													<input type="hidden" id="currentdd" th:value="${currentdd}" />
													<input type="hidden" id="currentdate" th:value="${jsdate}" />
													<input type="hidden" id="targetedbranchid"
														th:value="${targetedbranchid}" />

													<div class="input-group">
														<span class="input-group-text" id="basic-addon11">B-</span>
														<select class="form-control" id="branchlist">

															<th:block th:if="${targetedbranchName} !=''">
																<option th:value="${targetedbranchid}"
																	th:text="${targetedbranchName}"></option>
															</th:block>

															<th:block th:each="obj : ${branchls}">
																<option
																	th:if="${obj.BRANCH_NAME} != ${targetedbranchName}"
																	th:value="${obj.id}" th:text="${obj.BRANCH_NAME}"></option>
															</th:block>


														</select>
													</div>
												</div>
											</div>
											<div class="form-group col-md-2">
												<label class="additem btnmasternote"
													name="masterremarksdata"> <i class="bx bx-notepad"></i>
													<input type="hidden" id="master" />
												</label>
											</div>
											<div class="form-group col-md-4">
												<select class="form-control" id="atten_status_change">
													<option>Mark All As</option>
													<option>Present</option>
													<option>Absent</option>
													<option>Tardy</option>
													<option>Half Day</option>
												</select>
											</div>
										</div>
										<div class="table-responsive col-md-12">
											<table class="attendancelisttable">
												<tr th:each="emp,stat : ${empattendancedetailslist}">
													<td width="5%"><label class="emptitle additem"
														th:name="remark + ${stat.index}"> <input
															type="hidden" class="childremarks"
															th:id="remark + ${stat.index}"
															th:value="${#strings.arraySplit(emp,'||')[4]}" /> <input
															type="hidden" th:id="emp +${stat.index}"
															th:value="${#strings.arraySplit(emp,'||')[0]}" /> <input
															type="hidden" th:id="attid +${stat.index}"
															th:value="${#strings.arraySplit(emp,'||')[2]}" /> <i
															class="bx bx-notepad"></i></label></td>
													<td width="50%"><span
														th:text="${#strings.arraySplit(emp,'||')[1]}"></span></td>


													<td th:if="${#strings.arraySplit(emp,'||')[3]}=='P'"
														width="15%"><button type="button"
															th:name=" ${stat.index}"
															class="btn btnp cp btn-success text-white ">P</button></td>
													<td th:unless="${#strings.arraySplit(emp,'||')[3]}=='P'"
														width="15%"><button type="button"
															th:name=" ${stat.index}" class="btn btnp ">P</button></td>

													<td th:if="${#strings.arraySplit(emp,'||')[3]}=='A'"
														width="15%"><button type="button"
															th:name="${stat.index}"
															class="btn btna ca btn-danger text-white">A</button></td>
													<td th:unless="${#strings.arraySplit(emp,'||')[3]}=='A'"
														width="15%"><button type="button"
															th:name="${stat.index}" class="btn btna ">A</button></td>

													<td th:if="${#strings.arraySplit(emp,'||')[3]}=='T'"
														width="15%"><button type="button"
															th:name="${stat.index}"
															class="btn btnt ct btn-warning text-white ">T</button></td>
													<td th:unless="${#strings.arraySplit(emp,'||')[3]}=='T'"
														width="15%"><button type="button"
															th:name="${stat.index}" class="btn btnt ">T</button></td>

													<td th:if="${#strings.arraySplit(emp,'||')[3]}=='HL'"
														width="15%"><button type="button"
															th:name="${stat.index}"
															class="btn btnhl chl btn-secondary text-white">HL</button></td>
													<td th:unless="${#strings.arraySplit(emp,'||')[3]}=='HL'"
														width="15%"><button type="button"
															th:name="${stat.index}" class="btn btnhl ">HL</button></td>
													<td><i class="bx bx-trash" th:name="${stat.index}"></i>
													</td>
												</tr>


												<tr>
													<td colspan="6" align="right"><br /> <br />
														<button type="button" id="saveall"
															class="btn btn-secondary mr-1 mb-1 text-white">Save</button></td>
												</tr>

											</table>

										</div>
									</div>
								</div>
							</div>
							<!--/ User Content -->


						</div>


					</div>
					<!-- / Content -->

					<!-- Footer -->
					<footer class="content-footer footer bg-footer-theme">
						<div
							class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
							<div class="mb-2 mb-md-0"></div>
							<div></div>
						</div>
					</footer>
					<!-- / Footer -->
					<!--scrolling content Modal -->
					<div class="modal fade" id="jqueryInformationScrollable"
						tabindex="-1" role="dialog"
						aria-labelledby="jqueryInformationScrollableTitle"
						aria-hidden="true">

						<div
							class="modal-dialog modal-dialog-centered1 modal-simple modal-add-new-cc">
							<div class="modal-content p-3 p-md-5">
								<div class="modal-body">
									<button type="button" class="btn-close" data-bs-dismiss="modal"
										aria-label="Close"></button>
									<div class="text-center mb-4">
										<h3 id="modeljqueryresult"></h3>
									</div>
									<div class="col-12 text-center mt-4">

										<button type="button"
											class="btn btn-label-secondary btn-reset" id="btnmodelclose" 
											data-bs-dismiss="modal" aria-label="Close">Ok</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!--scrolling content Modal -->
					<!--scrolling content Modal -->
					<div class="modal fade" id="employeeStatusScrollable" tabindex="-1"
						role="dialog" aria-labelledby="employeeStatusScrollableTitle"
						aria-hidden="true">

						<div
							class="modal-dialog modal-dialog-centered1 modal-simple modal-add-new-cc">
							<div class="modal-content p-3">
								<div class="modal-body">
									<button type="button" class="btn-close" data-bs-dismiss="modal"
										aria-label="Close"></button>
									<div class="col-md-12">
										<div class="form-group">
											<label for="addmodel">Note</label>
											<div class="position-relative">
												<fieldset class="form-group">
													<input type="hidden" id="additemalltxt" />
													<textarea id="additemall" name="addmodel"
														class="form-control">
                                            	
                                            	</textarea>
												</fieldset>
											</div>
										</div>
									</div>
									<div class="col-12 text-center mt-4">
										<button type="button" class="btn btn-primary ml-1"
											id="additemallsavebtn">
											<i class="bx bx-check d-block d-sm-none"></i> <span
												class="d-none d-sm-block text-white">ADD</span>
										</button>
									</div>
								</div>
							</div>
						</div>

					</div>
					<!--scrolling content Modal -->

					<div class="content-backdrop fade"></div>
				</div>
				<!-- Content wrapper -->
			</div>
			<!-- / Layout page -->
		</div>

		<!-- Overlay -->
		<div class="layout-overlay layout-menu-toggle"></div>

		<!-- Drag Target Area To SlideIn Menu On Small Screens -->
		<div class="drag-target"></div>
	</div>
	<!-- / Layout wrapper -->

	<!-- Core JS -->
	<!-- build:js assets/vendor/js/core.js -->
	<script th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
	<script th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
	<script th:src="@{/assets/vendor/js/bootstrap.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>

	<script th:src="@{/assets/vendor/libs/hammer/hammer.js}"></script>

	<script th:src="@{/assets/vendor/libs/i18n/i18n.js}"></script>
	<script th:src="@{/assets/vendor/libs/typeahead-js/typeahead.js}"></script>

	<script th:src="@{/assets/vendor/js/menu.js}"></script>
	<!-- endbuild -->

	<!-- Vendors JS -->
	<script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
	<script th:src="@{/assets/vendor/libs/datatables/jquery.dataTables.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-responsive/datatables.responsive.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons/datatables-buttons.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.js}"></script>
	<script th:src="@{/assets/vendor/libs/jszip/jszip.js}"></script>
	<script th:src="@{/assets/vendor/libs/pdfmake/pdfmake.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons/buttons.html5.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/datatables-buttons/buttons.print.js}"></script>
	<script th:src="@{/assets/vendor/libs/sweetalert2/sweetalert2.js}"></script>
	<script th:src="@{/assets/vendor/libs/cleavejs/cleave.js}"></script>
	<script th:src="@{/assets/vendor/libs/cleavejs/cleave-phone.js}"></script>
	<script th:src="@{/assets/vendor/libs/select2/select2.js}"></script>
	<!-- Form Validation -->
	<script
		th:src="@{/assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js}"></script>

	<!-- Main JS -->
	<script th:src="@{/assets/js/main.js}"></script>

	<!-- Flat Picker -->
	<script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
	<script th:src="@{/assets/vendor/libs/flatpickr/flatpickr.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js}"></script>
	<script
		th:src="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.js}"></script>
	<script th:src="@{/assets/vendor/libs/pickr/pickr.js}"></script>

	<!-- Page JS -->
	<!-- <script th:src="@{/assets/js/modal-edit-user.js}"></script> -->
	<script th:src="@{/assets/js/app-user-view.js}"></script>
	<script th:src="@{/assets/js/app-user-view-account.js}"></script>


	<script>
	$(document).ready(function(){
		
		//--------------------------------------------------------
		$(function() {
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			$(document).ajaxSend(function(e, xhr, options) {
				xhr.setRequestHeader(header, token);
			});
		});
		//--------------------------------------------------------
		$('.td').click(function(){
			var branch =$("#branchlist :selected").text();
			window.location.href="empattendance?date="+ $(this).attr('name') +"&branch="+ branch +"";
			
		});
		
		$("#branchlist").change(function(){
			var selectdate= $(".selectdate").attr("name");
			var branch =$("#branchlist :selected").text();
			window.location.href="empattendance?date="+ selectdate +"&branch="+ branch +"";
			
		});
		//--------------------------------------------------------
		
		$('#atten_status_change').change(function(){

			var selected_val=$('#atten_status_change').val();
		
			$('.btnp').removeClass("cp btn-success text-white");
			$('.btna').removeClass("ca btn-danger text-white");				
			$('.btnt').removeClass("ct btn-warning text-white");					
			$('.btnhl').removeClass("chl btn-secondary text-white");
			
				if(selected_val=="Present")
				{
					$('.btnp').toggleClass("cp btn-success text-white");
				}
				if(selected_val=="Absent")
				{
					$('.btna').toggleClass("ca btn-danger text-white");
				}
				if(selected_val=="Tardy")
				{
					$('.btnt').toggleClass("ct btn-warning text-white");					
				}
				if(selected_val=="Half Day")
				{
					$('.btnhl').toggleClass("chl btn-secondary text-white");					
				}
		});
		//--------------------------------------------------------
		//--------------------------------------------------------
		$(".btnp").click(function()
		{			
			var empid_name=$(this).attr('name');							
			remover_atten_status(empid_name);	
	  		$(this).toggleClass(" cp btn-success text-white");
			
		});
		$(".btna").click(function()
		{
			var empid_name=$(this).attr('name');							
			remover_atten_status(empid_name);		
			$(this).toggleClass(" ca btn-danger text-white");
		});
		$(".btnt").click(function()
		{
			var empid_name=$(this).attr('name');							
			remover_atten_status(empid_name);		
			$(this).toggleClass(" ct btn-warning text-white");
		});
		$(".btnhl").click(function()
		{
			var empid_name=$(this).attr('name');							
			remover_atten_status(empid_name);		
			$(this).toggleClass(" chl btn-secondary text-white");
		});
		
		//--------------------------------------------------------
		$(".bx-trash").click(function(){
					var name=$(this).attr('name');
					var attendid=$('#attid'+ name).val();
					if(attendid >0)
					{
						 var formData = {
								 attendid : attendid					
							}
						 
						$.ajax({
							type : "POST",url : "employeeattendancedelete",
							data : formData,success : function(result) {
								
								remover_atten_status(name);
							},
							error : function(e) {
								$('#modeljqueryresult').text("Error" + e);
							}
						});
						
					}
					else
					{
						remover_atten_status(name);	
					}
					
					
					
				});
		//--------------------------------------------------------

		function remover_atten_status(empid_name)
		{
			
			$('.btnp[name='+empid_name+']').removeClass("cp btn-success text-white");
			$('.btna[name='+empid_name+']').removeClass("ca btn-danger text-white");				
			$('.btnt[name='+empid_name+']').removeClass("ct btn-warning text-white");
			$('.btnhl[name='+empid_name+']').removeClass("chl btn-secondary text-white");		
			
		}
		
		//--------------------------------------------------------------------------------
		
				
		$('#saveall').click(function(){
			$(this).hide();
			$("#btnmodelclose").removeClass("refresh");
			$('#modeljqueryresult').text("");
			var currentdd=$('#currentdd').val();
			
			//------------------------------------------------------------------------------
			// Update calendar as per the attendance count
			var P=0;
			var A=0; 
			var T=0;
			var HL=0; 
			
			P=document.querySelectorAll('.cp').length;
			A=document.querySelectorAll('.ca').length;
			T=document.querySelectorAll('.ct').length;
			HL=document.querySelectorAll('.chl').length;
			 
			$('.cal_innerp' + currentdd).text(P);
			$('.cal_innera' + currentdd).text(A);
			$('.cal_innert' + currentdd).text(T);
			$('.cal_innerhl' + currentdd).text(HL);
			//------------------------------------------------------------------------------
			var attendancestr="";
			var branchid= $('#targetedbranchid').val();
			var currentdate= $('#currentdate').val();
			$(".cp").each(function() {
			    var rowindex =$(this).attr('name');
			    var empid=$('#emp'+ rowindex).val();
			    var note=$('#remark'+ rowindex).val();
			    var attendid=$('#attid'+ rowindex).val();
			    attendancestr += branchid +"|" + currentdate +"|" +empid +"|" + note +"|P|" + attendid +"~";
			});
			$(".ca").each(function() {
			    var rowindex =$(this).attr('name');
			    var empid=$('#emp'+ rowindex).val();
			    var note=$('#remark'+ rowindex).val();
			    var attendid=$('#attid'+ rowindex).val();
			    attendancestr += branchid +"|" + currentdate +"|" +empid +"|" + note +"|A|" + attendid +"~";
			});
			$(".ct").each(function() {
			    var rowindex =$(this).attr('name');
			    var empid=$('#emp'+ rowindex).val();
			    var note=$('#remark'+ rowindex).val();
			    var attendid=$('#attid'+ rowindex).val();
			    attendancestr += branchid +"|" + currentdate +"|" +empid +"|" + note +"|T|" + attendid +"~";
			});
			$(".chl").each(function() {
			    var rowindex =$(this).attr('name');
			    var empid=$('#emp'+ rowindex).val();
			    var note=$('#remark'+ rowindex).val();
			    var attendid=$('#attid'+ rowindex).val();
			    attendancestr += branchid +"|" + currentdate +"|" +empid +"|" + note +"|HL|" + attendid +"~";
			});
			if(attendancestr !="")
			{
					 var formData = {
							attendancestr : attendancestr					
					}
					$.ajax({
						type : "POST",url : "employeeattendancesave",
						data : formData,success : function(result) {
							
							$('#modeljqueryresult').text( "Attendance updated successfully");
							$("#btnmodelclose").toggleClass("refresh");
						},
						error : function(e) {
							$('#modeljqueryresult').text("Error" + e);
						}
					});
					
					$('#jqueryInformationScrollable').modal('toggle'); 
			}else
			{
				$(this).show();
			}
			//------------------------------------------------------------------------------
		});
		
		
		$(document).on('click', ".refresh", function() {
			location.reload();
		});
		
	});
</script>
	<script>
			$(document).ready(function(){
				
				$(".additem").click(function(){
					var name=$(this).attr('name');
					var labeltext="";
					if(name=="masterremarksdata")
					{ labeltext="master"; }
					else
					{
						labeltext=name; 
					}
					$('#additemalltxt').val(labeltext);
					
					$("#additemall").val($('#'+labeltext).val());
					$('#employeeStatusScrollable').modal('toggle');
					
				});
				
				$("#additemallsavebtn").click(function(){
						
					if($("#additemall").val()!='')
					{
						var name=$('#additemalltxt').val();
						var labeltext="";
						if(name=="master"){ labeltext="master"; 
							$('.childremarks').val($("#additemall").val());
							$('#master').val($("#additemall").val());
						}
						else
						{
							labeltext=name;
							$('#' + labeltext).val($("#additemall").val());
						}
						
						$('#employeeStatusScrollable').modal('toggle');
					}
				});
				
				
				
				
			});
		
		</script>

</body>
</html>
