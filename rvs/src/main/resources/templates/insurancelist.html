<!DOCTYPE html>

<html
  xmlns:th="http://www.thymeleaf.org" 
  lang="en"
  class="light-style layout-navbar-fixed layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  th:data-assets-path="@{/assets/}"
  data-template="vertical-menu-template"
  
>
  <head>
	<meta name="_csrf" th:content="${_csrf.token}" />
	<!-- default header name is X-CSRF-TOKEN -->
	<meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Insurance List</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/assets/img/favicon/favicon.ico}" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet" type="text/css"
    />

    <!-- Icons -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/boxicons.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/fontawesome.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/flag-icons.css}" />

    <!-- Core CSS -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/css/rtl/core.css}" class="template-customizer-core-css" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/css/rtl/theme-default.css}" class="template-customizer-theme-css" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/css/demo.css}" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/sweetalert2/sweetalert2.css}" />
    <script th:src="@{/assets/vendor/libs/cleavejs/cleave.js}"></script>
	<script th:src="@{/assets/vendor/libs/cleavejs/cleave-phone.js}"></script>
	
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/flatpickr/flatpickr.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/pickr/pickr-themes.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/tagify/tagify.css}" />
     
    <!-- Row Group CSS -->
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-rowgroup-bs5/rowgroup.bootstrap5.css}" />
    <!-- Form Validation -->
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/formvalidation/dist/css/formValidation.min.css}" />


    <!-- Page CSS -->

    <!-- Helpers -->
    <script th:src="@{/assets/vendor/js/helpers.js}"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script th:src="@{/assets/vendor/js/template-customizer.js}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script th:src="@{/assets/js/config.js}"></script>
    <style>
    #branchName,#branchemail,#branch_startdate
    {
    	border-right: solid 1px #d4d8dd;
    }
    
    </style>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->
		<div th:insert="menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

       <div th:insert="header"></div>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->
				 <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="py-3 breadcrumb-wrapper mb-4"><span class="text-muted fw-light">HR Management / </span>Insurance</h4>

<!-- Users List -->
                       <!--  <div class="col-md-6 mb-4">
                          <label for="TagifyUserList" class="form-label">Users List</label>
                          <input
                            id="TagifyUserList"
                            name="TagifyUserList"
                            class="form-control"
                            
                          />
                        </div>
                        <input type="button" id="tv" value="click" /> -->
              <!-- DataTable with Buttons -->
              <div class="card">
                <div class="card-datatable table-responsive pt-0">
                  <table class="datatables-basic table table-bordered">
                    <thead>
                      <tr>
                        <th></th>
                        <th></th>
                        <th>id</th>
                        <th>Policy</th>
                        <th>Name/Asset</th>
                        <th>Vendor Name</th>
                        <th>Expire Date</th>
                      </tr>
                    </thead>
                  </table>
                </div>
              </div>
             
             <!-- End Offcanvas -->
			<button class="btnoffcanvas btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasEnd" aria-controls="offcanvasEnd" style="visibility:hidden" ></button>
			<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasEnd" aria-labelledby="offcanvasEndLabel">
			  <div class="offcanvas-header">
			    <h5 id="offcanvasEndLabel" class="offcanvas-title">New Insurance</h5>
			    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
			  </div>
			 <div class="offcanvas-body flex-grow-1">
                  <form class="add-new-record pt-0 row g-2 needs-validation" id="form-add-new-record" onsubmit="return false" novalidate>
                     <div class="col-sm-12">
                      <label class="form-label" for="firstName">First Name</label>
                      <div>
                        <input
                          type="text"
                          id="firstName"
                          class="form-control "
                           required
                        />
                          
                          <div class="invalid-feedback">Please enter First Name.</div>
                      </div>
                    </div> 
                    <div class="col-sm-12">
                      <label class="form-label" for="lastName">Last Name</label>
                      <div>
                         <input
                          type="text"
                          id="lastName"
                          class="form-control "
                           required
                        />
                       <div class="invalid-feedback">Please enter the Last Name.</div>
                      </div>
                       
                    </div>
                    <div class="col-sm-12">
                      <label class="form-label" for="phonenumber">Phone</label>
                      <div>
                         <input
                          type="text"
                          id="phonenumber"
                          class="form-control phone-number-otp-mask" pattern=".{12}"  
                           required
                        />
                       <div class="invalid-feedback">Please enter the Phone Number.</div>
                      </div>
                       
                    </div>
                    <div class="col-sm-12">
                      <label class="form-label" for="email">Email</label>
                      <div>
                        
                         <input
                          type="email"
                          id="email"
                          class="form-control "
                           required
                        />
                       <div class="invalid-feedback">Please enter the Email.</div>
                      </div>
                       
                    </div>
                    
                    <div class="col-sm-12">
                      <label class="form-label" for="branch_name">Branch </label>
                      <div>
                        
                        <select class="form-select" id="branch_name" required>
                           <option value="">Select Branch</option>
                           <option th:each="obj :${BranchList}" th:value="${obj.BRANCH_NAME}"  th:text="${obj.BRANCH_NAME}"></option>
                           
                         </select>
                          
                          <div class="invalid-feedback">Please select the branch.</div>
                      </div>
                    </div>
                     <div class="col-sm-12">
                      <label class="form-label" for="position">Position </label>
                      <div>
                        
                        <select class="form-select" id="position" required>
                           <option value="">Select Position</option>
                           <option th:each="str :${JobTitle}" th:value="${str}"  th:text="${str}"></option>
                           
                         </select>
                          
                          <div class="invalid-feedback">Please enter Position.</div>
                      </div>
                    </div>
                    <div class="col-sm-12">
                      <label class="form-label" for="salary">Salary</label>
                      <div>
                        
                        <input
                            type="text"
                            class="form-control"
                            id="salary"
                            required
                          />
                          <div class="invalid-feedback">Please enter Salary</div>
                      </div>
                    </div>
                     
                    <div class="col-sm-12">
                      <label class="form-label" for="joiningDate">Joining Date</label>
                      <div>
                        <input
                            type="text"
                            class="form-control"
                            id="joiningDate"
                            required
                          />
                          <div class="invalid-feedback">Please enter a valid Joining Date</div>
                      </div>
                    </div>
                    
                    
                 
                    <div class="col-sm-12">
                      <button type="submit" class="btn btn-primary newbranchdatasubmit me-sm-3 me-1">Submit</button>
                      <button type="reset" class="btn btn-outline-secondary newbranchdataclose" data-bs-dismiss="offcanvas">Cancel</button>
                    </div>
                  </form>
                </div>
			</div>
	
	        <!-- / Content -->

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  Â©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with â¤ï¸ by
                  <a href="https://pixinvent.com" target="_blank" class="footer-link fw-semibold">PIXINVENT</a>
                </div>
                <div>
                  <a href="https://themeforest.net/licenses/standard" class="footer-link me-4" target="_blank"
                    >License</a
                  >
                  <a href="https://1.envato.market/pixinvent_portfolio" target="_blank" class="footer-link me-4"
                    >More Themes</a
                  >

                  <a
                    href="https://pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/documentation-bs5/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a href="https://pixinvent.ticksy.com/" target="_blank" class="footer-link d-none d-sm-inline-block"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
    <script th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
    <script th:src="@{/assets/vendor/js/bootstrap.js}"></script>
    <script th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>

    <script th:src="@{/assets/vendor/libs/hammer/hammer.js}"></script>

    <script th:src="@{/assets/vendor/libs/i18n/i18n.js}"></script>
    <script th:src="@{/assets/vendor/libs/typeahead-js/typeahead.js}"></script>

    <script th:src="@{/assets/vendor/js/menu.js}"></script>
    <!-- endbuild -->

     <!-- Vendors JS -->
    <script th:src="@{/assets/vendor/libs/datatables/jquery.dataTables.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-responsive/datatables.responsive.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons/datatables-buttons.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/jszip/jszip.js}"></script>
    <script th:src="@{/assets/vendor/libs/pdfmake/pdfmake.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons/buttons.html5.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-buttons/buttons.print.js}"></script>
    <!-- Flat Picker -->
    <script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
    <script th:src="@{/assets/vendor/libs/flatpickr/flatpickr.js}"></script>
     <script th:src="@{/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
    <script th:src="@{/assets/vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js}"></script>
    <script th:src="@{/assets/vendor/libs/jquery-timepicker/jquery-timepicker.js}"></script>
    <script th:src="@{/assets/vendor/libs/pickr/pickr.js}"></script>
    
    <!-- Row Group JS -->
    <script th:src="@{/assets/vendor/libs/datatables-rowgroup/datatables.rowgroup.js}"></script>
    <script th:src="@{/assets/vendor/libs/datatables-rowgroup-bs5/rowgroup.bootstrap5.js}"></script>
    <script th:src="@{/assets/vendor/libs/sweetalert2/sweetalert2.js}"></script>
    <script th:src="@{/assets/vendor/libs/cleavejs/cleave.js}"></script>
	<script th:src="@{/assets/vendor/libs/cleavejs/cleave-phone.js}"></script>
    <script th:src="@{/assets/vendor/libs/tagify/tagify.js}"></script>
    <!-- Form Validation -->
    <script th:src="@{/assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js}"></script>
    <script th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js}"></script>
    <script th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js}"></script>

    <!-- Main JS -->
    <script th:src="@{/assets/js/main.js}"></script>

    <!-- Page JS -->
    <!-- <script th:src="@{/assets/js/tables-datatables-basic.js}"></script> -->
    <script th:src="@{/assets/js/form-validation.js}"></script> 
    <script>
    $(document).ready(function() {  
    	//--------------------------------------------------------------------------------------------------------------------------------------
    	let fv;
    	
    	//--------------------------------------------------------------------------------------------------------------------------------------
    	
    	$(document).on("click", ".create-new", function() {	
    		
    		$('.btnoffcanvas').click();
    	});
    	
    	//--------------------------------------------------------------------------------------------------------------------------------------		 		

		$(function() {
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			$(document).ajaxSend(function(e, xhr, options) {
				xhr.setRequestHeader(header, token);
			});
		});
		//--------------------------------------------------------------------------------------------------------------------------------------		 
		

    	  var dt_basic_table = $('.datatables-basic');

    	  	// DataTable with buttons
    	  	// --------------------------------------------------------------------

    	  	// --------------------------------------------------------------------

			  if (dt_basic_table.length) {
			    var dt_basic = dt_basic_table.DataTable({
			    	 ajax: {
			             "url": "insurancelistjson",
			             "type": "GET",
			             "dataSrc": "",
			         },
			      columns: [
			        { data: '' },
			        { data: 'insuranceid' },
			        { data: 'insuranceid' },
			        { data: '' },
			        { data: '' },
			        { data: '' },
			      ],
			      columnDefs: [
			        {
			          // For Responsive
			          className: 'control',
			          orderable: false,
			          responsivePriority: 2,
			          searchable: false,
			          targets: 0,
			          render: function(data, type, full, meta) {
			            return '';
			          }
			        },
			        
			        {
			          targets: 2,
			          searchable: false,
			          visible: false
			        },
			       
			         
			         
			        {
			            // Avatar image/badge, Name and post
			            targets: 5,
			            responsivePriority: 1,
			            render: function(data, type, full, meta) {
		            	 let str="";
			        	   for (i = 0; i < full["insuranceDetails"].length; i++) {
			        		   str +=   "<a href ='contactorganizationview?id="+full["insuranceDetails"][i].vendorName + "'>"+ full["insuranceDetails"][i].vendorNamestr + " </a><br/>" ;
			        		   
			        		 }
			        	   
			        	   return str ;
			             
			            }
			          },
		          	{
			           targets: 4,
			           render: function(data, type, full, meta) {
			        	   
			        	   let returnstr= "";
			        	   str = full["staffassetname"] ;
			        	   if(full['staffID'] != "")
		        		   {
			        		   returnstr=  "<a href ='emp?id="+full["staffID"] + "'>"+ str + "</a>";
		        		   }else
	        			   {
		        			   returnstr=  str;
	        			   }
		        	   
			        	   return returnstr;
			           }
			         },
			         {
				           targets: 3,
				           render: function(data, type, full, meta) {
				        	   let str="";
				        	   for (i = 0; i < full["insuranceDetails"].length; i++) {
				        		   str += full["insuranceDetails"][i].policyName + " <br/>";
				        		   
				        		 }
				        	   return "<a href ='insurance?id="+full["insuranceid"] + "'>"+ str + "</a>";
				           }
				         },
				         
				        
				         {
					           targets: 6,
					           render: function(data, type, full, meta) {
					        	   let str="";
					        	   for (i = 0; i < full["insuranceDetails"].length; i++) {
					        		   
					        		   let localstyle="";
					        		   if(full["insuranceDetails"][i].dueindicatorcolor=="G")
				        			   {
					        			   localstyle='style="color: #228B22"';
				        			   }else if(full["insuranceDetails"][i].dueindicatorcolor=="R")
				        			   {
				        				   localstyle='style="color: red"';
				        			   }else if(full["insuranceDetails"][i].dueindicatorcolor=="Y")
				        			   {
				        				   localstyle='style="color: #DAA520"';
				        			   }
					        		   
					        		   str +="<span "+ localstyle +">"+ full["insuranceDetails"][i].duedateformate + " </span><br/>";
					        		   
					        		 }
					        	   return str;
					           }
					         },
			          
			          
			        {
			          // Label
			          targets: -2,
			          render: function(data, type, full, meta) {
			            var $status_number = full['t_currentStatus'];
			            var $status = {
			              1: { title: 'Current', class: 'bg-label-primary' },
			              2: { title: 'Professional', class: ' bg-label-success' },
			              3: { title: 'Rejected', class: ' bg-label-danger' },
			              4: { title: 'Resigned', class: ' bg-label-warning' },
			              5: { title: 'Applied', class: ' bg-label-info' }
			            };
			            if (typeof $status[$status_number] === 'undefined') {
			              return data;
			            }
			            return (
			              '<span class="badge rounded-pill ' +
			              $status[$status_number].class +
			              '">' +
			              $status[$status_number].title +
			              '</span>'
			            );
			          }
			        }
			      ],
			      
			      dom:
			        '<"card-header"<"head-label text-center"><"dt-action-buttons text-end"B>><"d-flex justify-content-between align-items-center row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"f>>t<"d-flex justify-content-between row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',
			      displayLength: 10,
			      lengthMenu: [10, 25, 50, 75, 100],
			      buttons: [
			        {
			          extend: 'collection',
			          className: 'btn btn-label-primary dropdown-toggle me-2',
			          text: '<i class="bx bx-show me-2"></i>Export',
			          buttons: [
			            {
			              extend: 'print',
			              text: '<i class="bx bx-printer me-2" ></i>Print',
			              className: 'dropdown-item',
			              exportOptions: { columns: [3, 4, 5, 6, 7] }
			            },
			            {
			              extend: 'csv',
			              text: '<i class="bx bx-file me-2" ></i>Csv',
			              className: 'dropdown-item',
			              exportOptions: { columns: [3, 4, 5, 6, 7] }
			            },
			            {
			              extend: 'excel',
			              text: 'Excel',
			              className: 'dropdown-item',
			              exportOptions: { columns: [3, 4, 5, 6, 7] }
			            },
			            {
			              extend: 'pdf',
			              text: '<i class="bx bxs-file-pdf me-2"></i>Pdf',
			              className: 'dropdown-item',
			              exportOptions: { columns: [3, 4, 5, 6, 7] }
			            },
			            {
			              extend: 'copy',
			              text: '<i class="bx bx-copy me-2" ></i>Copy',
			              className: 'dropdown-item',
			              exportOptions: { columns: [3, 4, 5, 6, 7] }
			            }
			          ]
			        },
			        {
			          text: '<i class="bx bx-plus me-2"></i> <span class="d-none d-lg-inline-block" >Insurance </span>',
			          className: 'create-new btn btn-primary'
			        }
			      ],
			      responsive: {
			        details: {
			          display: $.fn.dataTable.Responsive.display.modal({
			            header: function(row) {
			              var data = row.data();
			              return 'Details of ' + data['staffassetname'];
			            }
			          }),
			          type: 'column',
			          renderer: function(api, rowIdx, columns) {
			            var data = $.map(columns, function(col, i) {
			              return col.title !== '' // ? Do not show row in modal popup if title is blank (for check box)
			                ? '<tr data-dt-row="' +
			                    col.rowIndex +
			                    '" data-dt-column="' +
			                    col.columnIndex +
			                    '">' +
			                    '<td>' +
			                    col.title +
			                    ':' +
			                    '</td> ' +
			                    '<td>' +
			                    col.data +
			                    '</td>' +
			                    '</tr>'
			                : '';
			            }).join('');
			
			            return data ? $('<table class="table"/><tbody />').append(data) : false;
			          }
			        }
			      }
			    });
			    $('div.head-label').html('<h5 class="card-title mb-0">Insurances</h5>');
  		}
   // --------------------------------------------------------------------
   		function validationformreset()
	   {
   				$('.newbranchdataclose').click();
   				$('.newbranchdatasubmit').prop("disabled",false);
	   			$('.needs-validation').removeClass("was-validated");
	   			$('.needs-validation').trigger("reset");
	   			$('.newbranchdatasubmit').html("Submit");
	   }
   	// --------------------------------------------------------------------
      $('.needs-validation').on('submit', function(event){
    	 
    	  if(true)
      	{
    	  $('.newbranchdatasubmit').prop("disabled",true);
    	  
    	    if(event.target.checkValidity() & $('#joiningDate').val()!=''){
    	    	$('.newbranchdatasubmit').html('<span class="spinner-border" role="status" aria-hidden="true"></span> Loading...');
    	    	  
    	    	var firstName =$('#firstName').val();
	        	var lastName =$('#lastName').val();
	        	var phonenumber =$('#phonenumber').val();
	        	var email =$('#email').val();
	        	var branch_name =$('#branch_name').val();
	        	var position =$('#position').val();
	        	var salary =$('#salary').val();
	        	var joiningDate =$('#joiningDate').val();
	        	
        	
	        	 var formData = {
	        			 firstName : firstName,
	        			 lastName : lastName,
	        			 phonenumber : phonenumber,
	        			 email : email,
	        			 branch_name : branch_name,
	        			 position : position,
	        			 salary : salary,
	        			 joiningDate: joiningDate
				 }
				 $.ajax({
						type : "POST",url : "insurancesavejson",
						data : formData, success : function(result) {
							validationformreset();
							Swal.fire({
						        title: 'Congratulations!',
						        text: 'New Insurance is Added Successfully',
						        imageUrl: assetsPath + 'img/backgrounds/15.jpg',
						        imageWidth: 400,
						        imageAlt: 'Custom image',
						        confirmButtonText: 'Welcome',
						        customClass: {
						          confirmButton: 'btn btn-primary'
						        },
						        buttonsStyling: false
						      });
							
							$('.datatables-basic').DataTable().ajax.reload();
							
							
						},
						error : function(e) {
							console.log("Error" + e);
							
						}
						
					});
        	 }
	        	
	        
    	    else
        	{
    	    	$('.newbranchdatasubmit').prop("disabled",false);
        	}
    	    
      }
	    });
  		
    	});
  //------------------------------------------------------------------------
 
    // Users List suggestion
    //------------------------------------------------------
    // Date Format
   const flatpickrFriendly = document.querySelector('#joiningDate');
	 // Human Friendly
	  if (flatpickrFriendly) {
	    flatpickrFriendly.flatpickr({
	      altInput: true,
	      altFormat: 'F j, Y',
	      dateFormat: 'Y-m-d'
	    });
	  }
   
	 
	  
	    // Phone
		 const phoneMask1 = document.querySelector('.phone-number-otp-mask');

	    // Phone Number Input Mask
	    if (phoneMask1) {
	      new Cleave(phoneMask1, {
	        phone: true,
	        phoneRegionCode: 'US'
	      });
	    }
	    
    </script>
  </body>
</html>