<!DOCTYPE html>

<html
  xmlns:th="http://www.thymeleaf.org" 
  lang="en"
  class="light-style layout-navbar-fixed layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  th:data-assets-path="@{/assets/}"
  data-template="vertical-menu-template"
  
>
  <head>
	<meta name="_csrf" th:content="${_csrf.token}" />
	<!-- default header name is X-CSRF-TOKEN -->
	<meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Check Out</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/assets/img/favicon/favicon.ico}" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet" type="text/css"
    />

    <!-- Icons -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/boxicons.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/fontawesome.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/fonts/flag-icons.css}" />

    <!-- Core CSS -->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/css/rtl/core.css}" class="template-customizer-core-css" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/vendor/css/rtl/theme-default.css}" class="template-customizer-theme-css" />
    <link rel="stylesheet" type="text/css" th:href="@{/assets/css/demo.css}" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-select-bs5/select.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-fixedcolumns-bs5/fixedcolumns.bootstrap5.css}">
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/datatables-fixedheader-bs5/fixedheader.bootstrap5.css}">
	
	<link rel="stylesheet" th:href="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/typeahead-js/typeahead.css}" />
    <link rel="stylesheet" th:href="@{/assets/vendor/libs/bs-stepper/bs-stepper.css}" />
	<link rel="stylesheet" th:href="@{/assets/vendor/libs/select2/select2.css}" />
	<link rel="stylesheet" th:href="@{/assets/vendor/libs/tagify/tagify.css}" />
	<link rel="stylesheet" th:href="@{/assets/vendor/libs/flatpickr/flatpickr.css}" />
	<link rel="stylesheet" th:href="@{/assets/vendor/libs/formvalidation/dist/css/formValidation.min.css}" />
	<link rel="stylesheet" th:href="@{/assets/vendor/libs/sweetalert2/sweetalert2.css}" />
    <!-- Page CSS -->

    <!-- Helpers -->
    <script th:src="@{/assets/vendor/js/helpers.js}"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script th:src="@{/assets/vendor/js/template-customizer.js}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script th:src="@{/assets/js/config.js}"></script>
    </head>
    <body>
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->
	<div th:insert="menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

      <div th:insert="header"></div>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->
				 <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="py-3 breadcrumb-wrapper mb-4"><span class="text-muted fw-light">Administration/Asset/ </span>Check Out</h4>
              
               <div class="card">
 
 	
 
 
 <div class="card-body">


	 
	 <form class="g-3"  id="form1" onsubmit="return false" enctype="multipart/form-data">
	 <div class="row">
	 <div class="col-sm-3">
	  <label class="form-label">Branch</label>
      <select class="form-select" id="Branch" name="Branch" required>
		 <option value="">--Select--</option>
		
 <option value="1">Coimbatore</option>
		
 <option value="2">Pollachi</option>
		
 <option value="3">Madurai</option>
		
 <option value="4">Salem</option>
	</select>
	 </div>

	 <div class="col-sm-3">
	  <label class="form-label">Custodian</label>
      <select class="form-select" id="Custodian" name="Custodian" required>
		 <option value="">--Select--</option>
 
	</select>
	 </div>
	 
	 <div class="col-sm-3">
	  <label class="form-label">Check Out Date</label>
	  <input type="text" class="form-control flatpickr" name="CheckOutDate" id="CheckOutDate" placeholder="Apr 3 2022" required>
	  </div>
	  
	 <div class="col-sm-3" id="vendordiv" style="display:none;">
	 <label for="form-label">Vendor </label>
	 <select class="form-select" name="vendor" id="vendorls">
	 <option value="">-</option>
	 <option value="1">INDUS INSTRUMENTS - Machinery</option>
	 </select>
	 </div>
	 
	 <div class="col-sm-3" id="locationdiv" style="display:none;">
	 <label for="form-label">Which Location/Department </label>
	 <input type="text" class="form-control" id="WhichLocation" name="WhichLocation">
	 </div>
	 </div>
	 
	 
	<!--  <div class="form-check form-check-success mb-2">
             
            
      
            <input name="Status" class="form-check-input" type="radio"  id="radio1" value="Checked Out" checked="" required>
            <label class="form-check-label" for="Status"> Checked Out &nbsp;&nbsp;</label>
         </div> -->
         
         <div class="row mt-3">
        <div class="col-md-2 mb-md-0 mb-2">
            <div class="form-check custom-option custom-option-icon checked">
              <label class="form-check-label custom-option-content" for="Status">
                <span class="custom-option-body">
                  <i class="bx bx-archive-out"></i>
                  <span class="custom-option-title">Checked Out</span>
                </span>
                <input name="Status" class="form-check-input" type="radio"  id="radio1" value="Checked Out" checked="" required>
              </label>
            </div>
          </div>
          
           <div class="col-md-2 mb-md-0 mb-2">
            <div class="form-check custom-option custom-option-icon checked">
              <label class="form-check-label custom-option-content" for="Status">
                <span class="custom-option-body">
                  <i class="bx bx-briefcase-alt-2"></i>
                  <span class="custom-option-title">Out For Repair</span>
                </span>
                <input name="Status" class="form-check-input" type="radio" id="radio2" value="Out for repair" required>
              </label>
            </div>
          </div>
          
          
           <div class="col-md-2 mb-md-0 mb-2">
            <div class="form-check custom-option custom-option-icon checked">
              <label class="form-check-label custom-option-content" for="Status">
                <span class="custom-option-body">
                  <i class="bx bx-building-house"></i>
                  <span class="custom-option-title">In Office Use</span>
                </span>
                <input name="Status" class="form-check-input" type="radio" id="radio2" value="In office Use" required>
              </label>
            </div>
          </div>
          
          
          
           </div>
          
          
         	<!--  <div class="form-check form-check-success mb-2">
            <input name="Status" class="form-check-input" type="radio" id="radio2" value="Out for repair" required>
            <label class="form-check-label" for="Status"> Out for repair &nbsp;&nbsp;</label>
            </div>
            	 <div class="form-check form-check-success mb-2">
            <input name="Status" class="form-check-input" type="radio" id="radio3" value="In office Use" required>
            <label class="form-check-label" for="Status"> In office Use &nbsp;&nbsp;</label> -->
       
	  <div class="row">
	  
	  <div class="col-sm-10">
	 
	  </div>
	  <div class="col-sm-2">
	   <button type="button" class="btn btn-block btn-primary mb-1" data-bs-toggle="modal" data-bs-target="#exampleModalScrollable"><i class="bx bx-plus-circle "></i> Add 
			</button>
	  </div>
	  
	   <div class="col-sm-12">
	  <div class="table-responsive mt-3">
		 <table class="table table-sm table-bordered">
		 <thead>
		<tr>
			<th width="5%">S.No</th>
			<th>Asset Type</th>
			<th>Asset Name</th>
			<th>Condition</th>
			<th>Photo</th>
			<th>Comments</th>
			<th>Actions</th>
			

		</tr>
		</thead>
		<tbody id="addckoutrow">
																

		</tbody>
		
		
			 												

	
		
		
		 </table>
		 </div>
	</div>	
	</div>	
	</form>
	
											
	 
	 
	 
	   <!--scrolling content Modal -->
	<!-- 							<div class="modal fade" id="exampleModalScrollable"
									tabindex="-1" role="dialog"
									aria-labelledby="exampleModalScrollableTitle"
									aria-hidden="true">
									<div class="modal-dialog modal-simple modal-enable-otp modal-dialog-centered"
										role="document">
										<div class="modal-content">
											
											<div class="modal-body">
											<h5 class="modal-title" id="exampleModalScrollableTitle">Check Out Items</h5>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				 <form class="row g-3"  id="form2" onsubmit="return false" enctype="multipart/form-data">
				 
				 <div class="col-sm-12">
	 <label for="form-label">Asset Type </label>
	 <select class="form-select" name="AssetType" id="AssetType" required>
	 <option value="">-</option>
	 <option value="Machinery">Machinery</option>
	 </select>
	 </div>
	 
	 <div class="col-sm-12">
	 <label for="form-label">Asset Name</label>
	 <input type="hidden"  id="idc" /> 
	 <input type="hidden"  name="ACondition" /> 
	 <select class="form-select" name="AssetName" id="AssetName" required>
	 <option value="">-</option>
	 <option value="Machinery">Machinery</option>
	 </select>
	 </div>
	 
	 <div class="col-sm-12">
	 <label for="form-label">Photo Attach</label>
	 <input type="file" name="Photo_Attach" class="form-control Photo_Attach" accept=".png,.jpg,.jpeg,.pdf" />
	 </div>
	 
	  <div class="col-sm-12">
	 <label for="form-label">Comments</label>
	 <input type="text" name="Comments" class="form-control" />
	 </div>
	 
	  <div class="col-sm-12">
	  <button type="submit" id="addcheckout" class="btn btn-primary mb-1" > Submit</button>
	 </div>
	 
	 
				 </form>
											</div>

										 
										</div>
									</div>
								</div> -->
								
								
								
								
								<!-- Add New Credit Card Modal -->
<div class="modal fade" id="exampleModalScrollable" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-simple modal-add-new-cc">
    <div class="modal-content p-3 p-md-5">
      <div class="modal-body">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="text-center mb-4">
          <h3>Check Out Items</h3>
         
        </div>
         <form class="row g-3"  id="form2" onsubmit="return false" enctype="multipart/form-data">
				 
				 <div class="col-sm-12">
	 <label for="form-label">Asset Type </label>
	 <select class="form-select" name="AssetType" id="AssetType" required>
	 <option value="">-</option>
	 <option value="Machinery">Machinery</option>
	 </select>
	 </div>
	 
	 <div class="col-sm-12">
	 <label for="form-label">Asset Name</label>
	 <input type="hidden"  id="idc" /> 
	 <input type="hidden"  name="ACondition" /> 
	 <select class="form-select" name="AssetName" id="AssetName" required>
	 <option value="">-</option>
	 <option value="Machinery">Machinery</option>
	 </select>
	 </div>
	 
	 <div class="col-sm-12">
	 <label for="form-label">Photo Attach</label>
	 <input type="file" name="Photo_Attach" class="form-control Photo_Attach" accept=".png,.jpg,.jpeg,.pdf" />
	 </div>
	 
	  <div class="col-sm-12">
	 <label for="form-label">Comments</label>
	 <input type="text" name="Comments" class="form-control" />
	 </div>
	 
	  <div class="col-sm-12">
	  <button type="submit" id="addcheckout" class="btn btn-primary mb-1" > Submit</button>
	 </div>
	 
	 
				 </form>
      </div>
    </div>
  </div>
</div>
<!--/ Add New Credit Card Modal -->
								
	 
	 </div>
	 </div>
    
    </div>
    
    
            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  Â©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with â¤ï¸ by
                  <a href="https://pixinvent.com" target="_blank" class="footer-link fw-semibold">PIXINVENT</a>
                </div>
                <div>
                  <a href="https://themeforest.net/licenses/standard" class="footer-link me-4" target="_blank"
                    >License</a
                  >
                  <a href="https://1.envato.market/pixinvent_portfolio" target="_blank" class="footer-link me-4"
                    >More Themes</a
                  >

                  <a
                    href="https://pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/documentation-bs5/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a href="https://pixinvent.ticksy.com/" target="_blank" class="footer-link d-none d-sm-inline-block"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
            
    </div>
    </div>
    </div>
    </div>
        <!-- Core JS -->
  <!-- build:js assets/vendor/js/core.js -->
  <script th:src="@{/assets/vendor/libs/jquery/jquery.js}"></script>
  <script th:src="@{/assets/vendor/libs/popper/popper.js}"></script>
  <script th:src="@{/assets/vendor/js/bootstrap.js}"></script>
  <script th:src="@{/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>
  
  <script th:src="@{/assets/vendor/libs/hammer/hammer.js}"></script>
  

  <script th:src="@{/assets/vendor/libs/i18n/i18n.js}"></script>
  <script th:src="@{/assets/vendor/libs/typeahead-js/typeahead.js}"></script>
  
  <script th:src="@{/assets/vendor/js/menu.js}"></script>
  <!-- endbuild -->


<script th:src="@{/assets/vendor/libs/moment/moment.js}"></script>
  <!-- Vendors JS -->
  <script th:src="@{/assets/vendor/libs/datatables/jquery.dataTables.js}"></script>
  <script th:src="@{/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js}"></script>
  <script th:src="@{/assets/vendor/libs/datatables-fixedcolumns/datatables.fixedcolumns.js}"></script>
  <script th:src="@{/assets/vendor/libs/bs-stepper/bs-stepper.js}"></script>
	<script th:src="@{/assets/vendor/libs/select2/select2.js}"></script>
	<script th:src="@{/assets/vendor/libs/tagify/tagify.js}"></script>
	<script th:src="@{/assets/vendor/libs/flatpickr/flatpickr.js}"></script>
	<script th:src="@{/assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js}"></script>
	<script th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js}"></script>
	<script th:src="@{/assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js}"></script>
	 <script th:src="@{/assets/vendor/libs/cleavejs/cleave.js}"></script>
     <script th:src="@{/assets/vendor/libs/cleavejs/cleave-phone.js}"></script>
     <script th:src="@{/assets/vendor/libs/sweetalert2/sweetalert2.js}"></script>

  <!-- Main JS -->
  <script th:src="@{/assets/js/main.js}"></script>
  <script>
  
  var token = $("meta[name='_csrf']").attr("content");
	var header = $("meta[name='_csrf_header']").attr("content");
	$(document).ajaxSend(function(e, xhr, options) {
		xhr.setRequestHeader(header, token);
	});
	
  $(".flatpickr").each(function(index) {
	  $(this).flatpickr({
	    	altInput: true,
		    altFormat: 'F j, Y',
		    dateFormat: 'Y-m-d',
	    });
  })
  
  const radio = $(`[name="Status"]`);
  const WhichLocation = $(`[name="WhichLocation"]`);
  const vendor = $(`[name="vendor"]`);
  const vendordiv = $(`#vendordiv`);
  const locationdiv = $(`#locationdiv`); 
  const form2 = $(`#form2`);
  const AssetType = $(`[name="AssetType"]`);
  const AssetName = $(`[name="AssetName"]`);
  const Photo_Attach = document.querySelector(`[name="Photo_Attach"]`);
  const Comments = $(`[name="Comments"]`);
  
  $(radio).change(function(e){
		if(this.value == "Out for repair")
		{
			vendordiv.show();
			locationdiv.hide();
			WhichLocation.val('');
		}
		else if(this.value == "In office Use")
		{
			locationdiv.show();
			vendordiv.hide();
			vendor.val('');
		}
		else
	    {
			vendordiv.hide();
			locationdiv.hide();
			WhichLocation.val('');
			vendor.val('');
	    }
  })
  
  $(form2).submit(function(e){
	 
		  var text=`<tr>`;
		  var at = $(`[name="AssetType"] option:selected`).text();
		  var an = $(`[name="AssetName"] option:selected`).text();
		  var com = Comments.val();
		  var i = $('#addckoutrow tr').length === 0 ? 1 : $('#addckoutrow tr').length+1;
		   
		  text+=`<td>${i}</td><td id="at-${i}">${at}</td><td id="an-${i}">${an}</td><td></td>`;
		  const FilesCount = Photo_Attach.files.length;
		      if(FilesCount > 0)
			  {
		    	  const file = Photo_Attach.files[0];
		    	  const url = URL.createObjectURL(file);
		    	  text+=`<td id="file-${i}"><a class="badge badge-center rounded-pill bg-label-info w-px-30 h-px-30 me-2" href="${url}" target="_blank"><i class="bx bx-download bx-xs"></i></a></td>`;
			  }
		      else
		      {
		    	  text+=`<td id="file-${i}">-</td>`;
		      }
		      text+=`<td id="com-${i}">${com}</td><td><button class="btn btn-sm btn-icon delete-record" type="button"><i class="bx bx-trash"></i></button></td></tr>`;
		      $('#addckoutrow').append(text);
		  
	      e.target.reset();
	      $(`#exampleModalScrollable`).modal('hide');
  })
  
$(document).on('click','.delete-record' , function(e){
	var tr = $(this).closest('tr');
	 Swal.fire({
         title: 'Are you sure?',
         text: "You won't be able to revert this!",
         icon: 'warning',
         showCancelButton: true,
         confirmButtonText: 'Yes,  Delete Check Out Entry it!',
         customClass: {
             confirmButton: 'btn btn-primary me-3',
             cancelButton: 'btn btn-label-secondary'
         },
         buttonsStyling: false
     }).then(function(result) {
    	 if (result.value) {
    	  tr.remove();
    	 }
     })
})
  </script>
    </body>
    </html>